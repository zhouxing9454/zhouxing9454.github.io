<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="纸鸢">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
        
        
        
            <link rel="preconnect" href="https://registry.npmmirror.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://zhouxing9454.github.io/2022/12/11/go黑马程序员/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:type" content="article">
<meta property="og:title" content="Go黑马程序员">
<meta property="og:url" content="https://zhouxing9454.github.io/2022/12/11/Go%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98/index.html">
<meta property="og:site_name" content="Olivia的小跟班">
<meta property="og:description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zhouxing9454.github.io/images/redefine-og.webp">
<meta property="article:published_time" content="2022-12-11T06:50:19.000Z">
<meta property="article:modified_time" content="2025-03-29T12:00:42.502Z">
<meta property="article:author" content="Olivia的小跟班">
<meta property="article:tag" content="Golang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhouxing9454.github.io/images/redefine-og.webp">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/fluid.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/fluid.png">
    <meta name="theme-color" content="#1890ff">
    <link rel="shortcut icon" href="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/fluid.png">
    <!--- Page Info-->
    
    <title>
        
            Go黑马程序员 | Olivia的小跟班
        
    </title>

    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/Chillax/chillax.css">

    <!--- Inject Part-->
    
        
            
    
            
    

    
<link rel="stylesheet" href="/css/style.css">


    
        <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/css/build/tailwind.css">
    

    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/GeistMono/geist-mono.css">
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/Geist/geist.css">
    <!--- Font Part-->
    
    
    
    
    
    
        <script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/anime.min.js" ></script>
    

    <script id="hexo-configurations">
    window.config = {"hostname":"zhouxing9454.github.io","root":"/","language":"zh-CN"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":null,"skip_dirs":[]}},"colors":{"primary":"#1890ff","secondary":"#1890ff","default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":true,"custom_message":null},"open_graph":{"enable":true,"image":"/images/redefine-og.webp","description":"Hexo Theme Redefine, Redefine Your Hexo Journey."},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/light-background.png","dark":"https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/back1.png"},"title":"Talk is cheap,Show me the code.","subtitle":{"text":["他们以为击败我就是终结，而我必归来将之改写。"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#D27D2D","dark":"#1E90FF"},"text_style":{"title_size":"2.1rem","subtitle_size":"1.2rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/zhouxing9454","instagram":null,"zhihu":null,"twitter":null,"qq":"https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/QQ.jpg","weixin":"https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/wechat.jpg","email":"zhouxing9454@gmail.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":true,"type":"fixed","audios":[{"name":"最后的旅行","artist":"Rainton桐","url":"http://music.163.com/song/media/outer/url?id=30512539.mp3","cover":"https://p1.music.126.net/XWUdXb46hIdIecRihPCV_A==/109951168667887853.jpg"}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.2","navbar":{"auto_hide":false,"color":{"left":"#FAF9F6","right":"#FAF9F6","transparency":50},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Tags":{"icon":"fa-solid fa-tags","path":"/tags/"},"Categories":{"icon":"fa-solid fa-folder","path":"/categories/"},"Friends":{"icon":"fa-solid fa-link","path":"/links/"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur","typography":{"line_height":1.6}},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/7/4 9:30:00"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 7.1.1"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    <h2 class="ml13">
        Olivia的小跟班
    </h2>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });

        var animation = anime.timeline({ loop: true })
            .add({
                targets: '.ml13 .letter',
                translateY: [20, 0],
                translateZ: 0,
                opacity: [0, 1],
                filter: ['blur(5px)', 'blur(0px)'],
                easing: "easeOutExpo",
                duration: 1200,
                delay: (el, i) => 300 + 20 * i,
            })
            .add({
                targets: '.ml13 .letter',
                translateY: [0, -20],
                opacity: [1, 0],
                filter: ['blur(0px)', 'blur(5px)'],
                easing: "easeInExpo",
                duration: 1000,
                delay: (el, i) => 15 * i,
                complete: function() {
                    hidePreloader();
                }
            }, '-=700');


        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            setTimeout(hidePreloader, 5000); // Call hidePreloader after 5000 milliseconds if not already called by animation
        });

        function hidePreloader() {
            var preloader = document.querySelector('.preloader');
            preloader.style.opacity = '0';
            setTimeout(function () {
                preloader.style.display = 'none';
            }, 200);
        }
    </script>
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Olivia的小跟班
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags/"
                                        >
                                    <i class="fa-solid fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories/"
                                        >
                                    <i class="fa-solid fa-folder fa-fw"></i>
                                    分类
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/links/"
                                        >
                                    <i class="fa-solid fa-link fa-fw"></i>
                                    友情链接
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags/"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-solid fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories/"
                        >
                            <span>
                                分类
                            </span>
                            
                                <i class="fa-solid fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/links/"
                        >
                            <span>
                                友情链接
                            </span>
                            
                                <i class="fa-solid fa-link fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">17</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">17</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">39</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">Go黑马程序员</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/background-img/avatar.jpg">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">纸鸢</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv4</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2022-12-11 14:50:19</span>
        <span class="mobile">2022-12-11 14:50:19</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-03-29 20:42</span>
            <span class="mobile">2025-03-29 20:42</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Golang/">Golang</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Golang/">Golang</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h1 id="1-初识go语言"><a href="#1-初识go语言" class="headerlink" title="1.初识go语言"></a>1.初识go语言</h1><h3 id="第一个Go程序"><a href="#第一个Go程序" class="headerlink" title="第一个Go程序"></a>第一个Go程序</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.狗语言是以包作为管理单位</span></span><br><span class="line"><span class="comment">// 2.每个文件都必须先声明包</span></span><br><span class="line"><span class="comment">// 3，程序必须有一个main包（重要）</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//导入包</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//入口函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; <span class="comment">//左括号必须和函数名同行，main函数不带参数</span></span><br><span class="line">	<span class="comment">//打印</span></span><br><span class="line">	<span class="comment">//hello world打印到屏幕,Println()函数会自动换行</span></span><br><span class="line">	<span class="comment">//调用函数，大部分都需要导入包</span></span><br><span class="line">	<span class="comment">/* 这也是注释的一种方式 */</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;hello world!&quot;</span>) <span class="comment">//语句结尾不需要加分号</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="命令行运行程序"><a href="#命令行运行程序" class="headerlink" title="命令行运行程序"></a>命令行运行程序</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221211160453985.png"
                      alt="image-20221211160453985"
                ></p>
<h1 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2.数据类型"></a>2.数据类型</h1><h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>计算机用来计算，计算前需要存数，如何存数？</p>
<p>数据类型作用：告诉编译器这个数（变量）应该以多大的内存存储</p>
<p><strong>Go 语言中的函数名、变量名、常量名、类型名、语句标号和包名等所有的命名，都遵循一</strong></p>
<p><strong>个简单的命名规则：一个名字必须以一个字母（Unicode 字母）或下划线开头，后面可以跟</strong></p>
<p><strong>任意数量的字母、数字或下划线。大写字母和小写字母是不同的：heapSort 和 Heapsort 是两</strong></p>
<p><strong>个不同的名字。</strong></p>
<p>Go 语言中类似 if 和 switch 的关键字有 25 个(均为小写)。关键字不能用于自定义名字，只能</p>
<p>在特定语法结构中使用。</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">break default func interface select</span><br><span class="line">case defer go map struct</span><br><span class="line">chan else goto package switch</span><br><span class="line">const fallthrough if range type</span><br><span class="line">continue for import return var</span><br></pre></td></tr></table></figure></div>



<p>此外，还有大约 30 多个预定义的名字，比如 int 和 true 等，主要对应内建的常量、类型和</p>
<p>函数。</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">内建常量:</span><br><span class="line">true false iota nil</span><br><span class="line"></span><br><span class="line">内建类型:</span><br><span class="line">int int8 int16 int32 int64</span><br><span class="line">uint uint8 uint16 uint32 uint64 uintptr</span><br><span class="line">float32 float64 complex128 complex64</span><br><span class="line">bool byte rune string error</span><br><span class="line"></span><br><span class="line">内建函数:</span><br><span class="line">make len cap new append copy close delete</span><br><span class="line">complex real imag</span><br><span class="line">panic recover</span><br></pre></td></tr></table></figure></div>





<h3 id="变量的声明"><a href="#变量的声明" class="headerlink" title="变量的声明"></a>变量的声明</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//导入包后，必须要使用</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//变量，程序运行期间，可以改变的量</span></span><br><span class="line">	<span class="comment">//1.声明格式: var 变量名 变量类型（变量声明之后，必须要使用）</span></span><br><span class="line">	<span class="comment">//2.只是声明没有初始化的变量，默认值为0</span></span><br><span class="line">	<span class="comment">//3.同一个&#123;&#125;里，声明的变量名是唯一的</span></span><br><span class="line">	<span class="comment">//4.可以同时声明多个变量</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	a = <span class="number">10</span> <span class="comment">//变量的赋值</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>变量初始化和自动推导类型</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//导入包后，必须要使用</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//变量，程序运行期间，可以改变的量</span></span><br><span class="line">	<span class="comment">//1.声明格式: var 变量名 变量类型（变量声明之后，必须要使用）</span></span><br><span class="line">	<span class="comment">//2.只是声明没有初始化的变量，默认值为0</span></span><br><span class="line">	<span class="comment">//3.同一个&#123;&#125;里，声明的变量名是唯一的</span></span><br><span class="line">	<span class="comment">//4.可以同时声明多个变量</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	a = <span class="number">10</span> <span class="comment">//变量的赋值</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.变量的初识化，声明变量时，同时赋值</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="type">int</span> = <span class="number">10</span> <span class="comment">//初始化，声明变量时，同时赋值（一步到位）</span></span><br><span class="line">	b = <span class="number">35</span>         <span class="comment">//赋值，先声明，后赋值</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.自动推导类型，必须初始化，通过初始化的值确定类型（常用）</span></span><br><span class="line">	c := <span class="number">30</span></span><br><span class="line">	<span class="comment">//%T打印变量所属的类型</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c is type of %T&quot;</span>, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>自动推导类型和赋值的区别</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	<span class="comment">//赋值：赋值之前先声明变量</span></span><br><span class="line">	<span class="comment">//赋值，可以赋值n次</span></span><br><span class="line">	a = <span class="number">10</span></span><br><span class="line">	a = <span class="number">12</span></span><br><span class="line">	a = <span class="number">13</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//:=，自动推导类型，先声明变量b，再给b赋值为20</span></span><br><span class="line">	<span class="comment">//自动推导，同一个变量名只能使用一次，用于初始化那次</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//b:=30 会报错，因为已经有一个变量b存在了</span></span><br><span class="line"></span><br><span class="line">	b = <span class="number">30</span> <span class="comment">//只是赋值，可以使用</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>Println和Printf的区别</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">//  必须有一个main包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	<span class="comment">//一段一段处理，自动加换行</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//格式化输出，把a的内容放在%d的位置</span></span><br><span class="line">	<span class="comment">//“a=10\n&quot; 这个字符串输出到屏幕，”\n“表示换行符</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d\n&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	c := <span class="number">30</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a, <span class="string">&quot;,b=&quot;</span>, b, <span class="string">&quot;,c=&quot;</span>, c)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d,b=%d,c=%d&quot;</span>, a, b, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221211195102865.png"
                      alt="image-20221211195102865"
                ></p>
<p>多重赋值和匿名变量</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> (a, b, c <span class="type">int</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//a:=10</span></span><br><span class="line">	<span class="comment">//b:=20</span></span><br><span class="line">	<span class="comment">//c:=30</span></span><br><span class="line"></span><br><span class="line">	a, b := <span class="number">10</span>, <span class="number">20</span></span><br><span class="line">	<span class="keyword">var</span> temp <span class="type">int</span></span><br><span class="line">	temp = a</span><br><span class="line">	a = b</span><br><span class="line">	b = temp</span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a, <span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//i:=10</span></span><br><span class="line">	<span class="comment">//j:=20</span></span><br><span class="line">	i, j := <span class="number">10</span>, <span class="number">10</span></span><br><span class="line">	i, j = j, i</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d,b=%d\n&quot;</span>, i, j)</span><br><span class="line"></span><br><span class="line">	i = <span class="number">30</span></span><br><span class="line">	j = <span class="number">20</span></span><br><span class="line">	temp, _ = i, j</span><br><span class="line">	fmt.Println(<span class="string">&quot;temp=&quot;</span>, temp)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> c, d, e <span class="type">int</span></span><br><span class="line">	c, d, e = test()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;c=%d,d=%d,e=%d\n&quot;</span>, c, d, e)</span><br><span class="line"></span><br><span class="line">	d = <span class="number">5</span></span><br><span class="line">	_, d, _ = test()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d=%d&quot;</span>, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="常量的使用"><a href="#常量的使用" class="headerlink" title="常量的使用"></a>常量的使用</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//变量： 程序运行期间，可以改变的量，变量声明需要var</span></span><br><span class="line">	<span class="comment">//常量： 程序运行期间，不可以改变的量，常量声明需要const</span></span><br><span class="line">	<span class="keyword">const</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">	<span class="comment">//a=12 //不能修改常量</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> b = <span class="number">20</span> <span class="comment">//常量的自动推导类型不需要：=</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;b type is %T\n&quot;</span>, b)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="多个变量或常量的定义"><a href="#多个变量或常量的定义" class="headerlink" title="多个变量或常量的定义"></a>多个变量或常量的定义</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//	var a int = 10</span></span><br><span class="line">	<span class="comment">//	var b float64 = 3.14</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		a <span class="type">int</span>     = <span class="number">10</span></span><br><span class="line">		b <span class="type">float64</span> = <span class="number">3.14</span></span><br><span class="line">	)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">		a = <span class="number">10</span></span><br><span class="line">		b = <span class="number">3.14</span></span><br><span class="line">	)<span class="comment">//这个不用加：=就可以自动推导类型</span></span><br><span class="line">    </span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//	const a int = 10</span></span><br><span class="line">	<span class="comment">//	const b float64 = 3.14</span></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		i <span class="type">int</span>     = <span class="number">10</span></span><br><span class="line">		j <span class="type">float64</span> = <span class="number">3.14</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Println(<span class="string">&quot;i=&quot;</span>, i)</span><br><span class="line">	fmt.Println(<span class="string">&quot;j=&quot;</span>, j)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="iota枚举"><a href="#iota枚举" class="headerlink" title="iota枚举"></a>iota枚举</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.iota常量自动生成器,每行一个，自动累加1</span></span><br><span class="line">	<span class="comment">//2.iota给常量赋值使用</span></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		a = <span class="literal">iota</span></span><br><span class="line">		b = <span class="literal">iota</span></span><br><span class="line">		c = <span class="literal">iota</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d,b=%d,c=%d\n&quot;</span>, a, b, c)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.iota遇到const，重置为0</span></span><br><span class="line">	<span class="keyword">const</span> d = <span class="literal">iota</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;d=%d\n&quot;</span>, d)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.可以只写一个iota</span></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		a1 = <span class="literal">iota</span></span><br><span class="line">		b2</span><br><span class="line">		c3</span><br><span class="line">	)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a1=%d,b2=%d,c3=%d\n&quot;</span>, a1, b2, c3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.如果是同一行，值都一样</span></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		i          = <span class="literal">iota</span></span><br><span class="line">		j1, j2, j3 = <span class="literal">iota</span>, <span class="literal">iota</span>, <span class="literal">iota</span></span><br><span class="line">		k          = <span class="literal">iota</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;i=%d,j1=%d,j2=%d,j3=%d,k=%d\n&quot;</span>, i, j1, j2, j3, k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="bool类型"><a href="#bool类型" class="headerlink" title="bool类型"></a>bool类型</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.声明变量，没有初识化，布尔值默认为false(零值作为初识值）</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="type">bool</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	b = <span class="literal">true</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.自动推导类型</span></span><br><span class="line">	<span class="keyword">var</span> c = <span class="literal">true</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;c=&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">	d := <span class="literal">false</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;d=&quot;</span>, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//声明变量</span></span><br><span class="line">	<span class="keyword">var</span> f1 <span class="type">float64</span></span><br><span class="line">	f1 = <span class="number">3.14</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;f1=&quot;</span>, f1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//自动推导类型</span></span><br><span class="line">	f2 := <span class="number">31.4</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 type is %T\n&quot;</span>, f2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float64存储小数比float32更准确</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">   var ch byte //声明字符类型</span><br><span class="line">   ch = 97</span><br><span class="line">   //fmt.Println(&quot;ch=&quot;, ch)</span><br><span class="line">   //格式化输出，%c以字符方式打印，%d以整型方式打印</span><br><span class="line">   fmt.Printf(&quot;ch=%c,%d\n&quot;, ch, ch)</span><br><span class="line"></span><br><span class="line">   ch = &#x27;a&#x27; //字符是单引号</span><br><span class="line">   fmt.Printf(&quot;ch=%c,%d\n&quot;, ch, ch)</span><br><span class="line"></span><br><span class="line">   //大写转小写，小写转大写，大小写相差32，小写大</span><br><span class="line">   //转义字符以&#x27;\&#x27;开头，&#x27;\n&#x27;换行符</span><br><span class="line">   fmt.Printf(&quot;大写:%d,小写:%d\n&quot;, &#x27;A&#x27;, &#x27;a&#x27;)</span><br><span class="line">   fmt.Printf(&quot;大写转小写：%c\n&quot;, &#x27;A&#x27;+32)</span><br><span class="line">   fmt.Printf(&quot;小写转大写：%c\n&quot;, &#x27;a&#x27;-32)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str1 <span class="type">string</span> <span class="comment">//声明变量</span></span><br><span class="line">	str1 = <span class="string">&quot;abc&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;str1=&quot;</span>, str1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//自动推导类型</span></span><br><span class="line">	str2 := <span class="string">&quot;mike&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;str2=&quot;</span>, str2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//内建函数，len()可以测字符串的长度，有多少个字符</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;len(str2)=&quot;</span>, <span class="built_in">len</span>(str2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="字符和字符串的区别"><a href="#字符和字符串的区别" class="headerlink" title="字符和字符串的区别"></a>字符和字符串的区别</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> ch <span class="type">byte</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*字符</span></span><br><span class="line"><span class="comment">	  1.单引号</span></span><br><span class="line"><span class="comment">	  2.字符，往往都只有一个字符，转义字符除外（如&#x27;\n&#x27;)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	ch = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;ch=&quot;</span>, ch)</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		字符串</span></span><br><span class="line"><span class="comment">		1.双引号</span></span><br><span class="line"><span class="comment">		2.字符串中有一个或多个字符组成</span></span><br><span class="line"><span class="comment">		3.每个字符串都是隐藏了一个结束符,&#x27;\0&#x27;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	str = <span class="string">&quot;a&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;str=&quot;</span>, str)</span><br><span class="line"></span><br><span class="line">	str = <span class="string">&quot;hell go&quot;</span></span><br><span class="line">	<span class="comment">//取下标操作</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;str[0]=%c&quot;</span>, str[<span class="number">0</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="复数类型"><a href="#复数类型" class="headerlink" title="复数类型"></a>复数类型</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212152103428.png"
                      alt="image-20221212152103428"
                ></p>
<h3 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="string">&#x27;A&#x27;</span></span><br><span class="line">	c := <span class="string">&quot;hello&quot;</span></span><br><span class="line">	d := <span class="number">3.14</span></span><br><span class="line">	<span class="comment">//%T 操作变量所属类型, %d整型格式， %c字符个数 ，%s字符串格式， %f浮点型个数</span></span><br><span class="line">	<span class="comment">//%v 自动匹配格式输出</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%T,%T,%T\n&quot;</span>, a, b, c, d)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%d,%c,%s,%f\n&quot;</span>, a, b, c, d)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v,%v,%v,%v\n&quot;</span>, a, b, c, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="变量的输入"><a href="#变量的输入" class="headerlink" title="变量的输入"></a>变量的输入</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="type">int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;请输入变量a:&quot;</span>)</span><br><span class="line">	fmt.Scanf(<span class="string">&quot;%d&quot;</span>, &amp;a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;请输入变量b:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;b)</span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="类型转化"><a href="#类型转化" class="headerlink" title="类型转化"></a>类型转化</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212154458277.png"
                      alt="image-20221212154458277"
                ></p>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">//给int64起一个别名叫bigint</span></span><br><span class="line">   <span class="keyword">type</span> bigint <span class="type">int64</span></span><br><span class="line">   <span class="keyword">var</span> a bigint <span class="comment">//等价于var a int64</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;a type is %T\n&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">type</span> (</span><br><span class="line">      long <span class="type">int64</span></span><br><span class="line">      char <span class="type">byte</span></span><br><span class="line">   )</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> b long = <span class="number">11</span></span><br><span class="line">   <span class="keyword">var</span> ch char = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;b=%d,ch=%c\n&quot;</span>, b, ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h1 id="3运算符"><a href="#3运算符" class="headerlink" title="3运算符"></a>3运算符</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212161257949.png"
                      alt="image-20221212161257949"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212161302744.png"
                      alt="image-20221212161302744"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212161307687.png"
                      alt="image-20221212161307687"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212162315689.png"
                      alt="image-20221212162315689"
                ></p>
<p>只有整除哦</p>
<h1 id="4-流程控制"><a href="#4-流程控制" class="headerlink" title="4.流程控制"></a>4.流程控制</h1><h3 id="if的使用，if支持初始化语句"><a href="#if的使用，if支持初始化语句" class="headerlink" title="if的使用，if支持初始化语句"></a>if的使用，if支持初始化语句</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := <span class="string">&quot;王思聪&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//if和&#123;就是条件，条件通常都是关系运算符</span></span><br><span class="line">   <span class="keyword">if</span> s == <span class="string">&quot;王思聪&quot;</span> &#123; <span class="comment">//左括号和if在同一行</span></span><br><span class="line">      fmt.Println(<span class="string">&quot;王思聪&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//if支持1个初始化语句，初始化语句和判断条件以分号分隔</span></span><br><span class="line">   <span class="keyword">if</span> a := <span class="number">10</span>; a == <span class="number">10</span> &#123; <span class="comment">//条件为真，指向&#123;&#125;里面</span></span><br><span class="line">      fmt.Println(<span class="string">&quot;a==10&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="if-else-if-else的用法"><a href="#if-else-if-else的用法" class="headerlink" title="if else_if else的用法"></a>if else_if else的用法</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">//1</span></span><br><span class="line">   <span class="keyword">if</span> a := <span class="number">10</span>; a == <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;a==10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> a &gt; <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;a&gt;10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> a &lt; <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;a&lt;10&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//2</span></span><br><span class="line">   b := <span class="number">15</span></span><br><span class="line">   <span class="keyword">if</span> b == <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;b==10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> b &gt; <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;b&gt;10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> b &lt; <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;b&lt;10&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//3</span></span><br><span class="line">   c := <span class="number">5</span></span><br><span class="line">   <span class="keyword">if</span> c == <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;c==10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> c &gt; <span class="number">10</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;c&gt;10&quot;</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;c&lt;10&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//4</span></span><br><span class="line">   d := <span class="number">12</span></span><br><span class="line">   <span class="keyword">if</span> d == <span class="number">12</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;d==12&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> d &gt; <span class="number">12</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;d&gt;12&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> d &lt; <span class="number">12</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;d&lt;12&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num := <span class="number">12</span></span><br><span class="line">	<span class="keyword">switch</span> num &#123; <span class="comment">//switch后面写的是变量本身</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;按下的是1楼&quot;</span>)</span><br><span class="line">		<span class="comment">//break——&gt;go语言保留了break关键字，用于跳出switch语句，可以不用写break，默认就包含</span></span><br><span class="line">		<span class="comment">//fallthrough 不会跳出switch语句，后面case下的语句无条件执行</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;按下的是2楼&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;按下的是3楼&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;按下的是4楼&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;按下的是xxx楼&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//补充switch后面可以没有变量(即是没有条件)</span></span><br><span class="line">	<span class="comment">//case后面可以是条件，也可以是多个值一起（以，分隔）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   sum := <span class="number">0</span></span><br><span class="line">   <span class="comment">//for 初始化条件; 判断条件; 条件变化&#123;</span></span><br><span class="line">   <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//1）初始化条件 i:=0</span></span><br><span class="line">   <span class="comment">//2)判断条件是否为真 i&lt;=100 ,如果为真，执行循环体，如果为假，跳出循环</span></span><br><span class="line">   <span class="comment">//3)条件变化 i++</span></span><br><span class="line">   <span class="comment">//4)重复2，3</span></span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">      sum = sum + i</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(<span class="string">&quot;sum=&quot;</span>, sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="range"><a href="#range" class="headerlink" title="range"></a>range</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   str := <span class="string">&quot;abc&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//通过for打印每个字符</span></span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, str[i])</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//迭代打印每个元素，默认返回2个值：一个是元素的位置，一个是元素本身</span></span><br><span class="line">   <span class="keyword">for</span> i, data := <span class="keyword">range</span> str &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, data)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//第二个返回值，默认丢弃</span></span><br><span class="line">   <span class="comment">//1)</span></span><br><span class="line">   <span class="keyword">for</span> i := <span class="keyword">range</span> str &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, str[i])</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//2)</span></span><br><span class="line">   <span class="keyword">for</span> i, _ := <span class="keyword">range</span> str &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, str[i])</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="break-continue"><a href="#break-continue" class="headerlink" title="break,continue"></a>break,continue</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212194635581.png"
                      alt="image-20221212194635581"
                ></p>
<h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221212194735937.png"
                      alt="image-20221212194735937"
                ></p>
<h1 id="5-函数"><a href="#5-函数" class="headerlink" title="5.函数"></a>5.函数</h1><h3 id="定义格式"><a href="#定义格式" class="headerlink" title="定义格式"></a>定义格式</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221213141808884.png"
                      alt="image-20221213141808884"
                ></p>
<h3 id="无参无返回值"><a href="#无参无返回值" class="headerlink" title="无参无返回值"></a>无参无返回值</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MyFunc 无参无返回值函数的定义</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">666</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 无参无返回值函数的调用：函数名()</span></span><br><span class="line">	MyFunc()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 写这里也行</span></span><br><span class="line"><span class="comment">func MyFunc() &#123;</span></span><br><span class="line"><span class="comment">	a := 666</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;a=&quot;, a)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div>



<h3 id="有参无返回值"><a href="#有参无返回值" class="headerlink" title="有参无返回值"></a>有参无返回值</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//个人建议还是把每一个的参数类型写明吧</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MyFunc01 有参无返回值函数的定义</span></span><br><span class="line"><span class="comment">// 定义函数时，在函数名后面（）定义的参数叫形参</span></span><br><span class="line"><span class="comment">// 参数传递，只能由实参传递给形参，不能反过来，单向传递</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc01</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	a = <span class="number">111</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc02</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	a = <span class="number">111</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a, <span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc03</span><span class="params">(a, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	a = <span class="number">111</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a=&quot;</span>, a, <span class="string">&quot;b=&quot;</span>, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc04</span><span class="params">(a <span class="type">int</span>, b <span class="type">float64</span>, c <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyFunc05</span><span class="params">(a, b <span class="type">float64</span>, c <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 有参无返回值函数的调用：函数名(所需参数)</span></span><br><span class="line">	<span class="comment">// 调用函数传递的参数叫实参</span></span><br><span class="line">	MyFunc01(<span class="number">121</span>)</span><br><span class="line">	MyFunc03(<span class="number">11</span>, <span class="number">22</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="不定参数类型"><a href="#不定参数类型" class="headerlink" title="不定参数类型"></a>不定参数类型</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Myfunc01</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> &#123; <span class="comment">//固定参数</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Myfunc02 ...type 不定参数类型</span></span><br><span class="line"><span class="comment">// 注意：补丁参数，一定只能放在形参中的最后一个参数</span></span><br><span class="line"><span class="comment">// 固定参数一定要传参，不定参数根据需要传参</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Myfunc02</span><span class="params">(args ...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;len(args)=&quot;</span>, <span class="built_in">len</span>(args))</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;args[%d]=%d\n&quot;</span>, i, args[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;__________&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> args &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;args[%d]=%d\n&quot;</span>, i, data)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;__________&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Myfunc01(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	Myfunc02()</span><br><span class="line">	Myfunc02(<span class="number">1</span>)</span><br><span class="line">	Myfunc02(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="不定参数的传递"><a href="#不定参数的传递" class="headerlink" title="不定参数的传递"></a>不定参数的传递</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Myfunc01</span><span class="params">(args ...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Myfunc01&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, data := <span class="keyword">range</span> args &#123; <span class="comment">//遍历参数列表</span></span><br><span class="line">		fmt.Println(data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Myfunc02</span><span class="params">(args ...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Myfunc02&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, data := <span class="keyword">range</span> args &#123; <span class="comment">//遍历参数列表</span></span><br><span class="line">		fmt.Println(data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test</span><span class="params">(args ...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	Myfunc01(args...)</span><br><span class="line">	Myfunc02(args[<span class="number">1</span>:]...) <span class="comment">//从下标是1的参数开始传递（包含1）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">//函数调用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="返回一个值"><a href="#返回一个值" class="headerlink" title="返回一个值"></a>返回一个值</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test01</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">250</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test02</span><span class="params">()</span></span> (value <span class="type">int</span>) &#123;</span><br><span class="line">	value = <span class="number">250</span></span><br><span class="line">	<span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test03</span><span class="params">()</span></span> (value <span class="type">int</span>) &#123;</span><br><span class="line">	value = <span class="number">250</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v1 := Test01()</span><br><span class="line">	v2 := Test02()</span><br><span class="line">	v3 := Test03()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;V1=%d,V2=%d,V3=%d\n&quot;</span>, v1, v2, v3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="多个返回值"><a href="#多个返回值" class="headerlink" title="多个返回值"></a>多个返回值</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test01</span><span class="params">()</span></span> (<span class="type">int</span>, <span class="type">string</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">250</span>, <span class="string">&quot;sb&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test02</span><span class="params">()</span></span> (value <span class="type">int</span>, strs <span class="type">string</span>) &#123;</span><br><span class="line">	value = <span class="number">250</span></span><br><span class="line">	strs = <span class="string">&quot;sb&quot;</span></span><br><span class="line">	<span class="keyword">return</span> value, strs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test03</span><span class="params">()</span></span> (value <span class="type">int</span>, strs <span class="type">string</span>) &#123;</span><br><span class="line">	value = <span class="number">250</span></span><br><span class="line">	strs = <span class="string">&quot;sb&quot;</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v1, v2 := Test01()</span><br><span class="line">	_, v3 := Test02()</span><br><span class="line">	v4, v5 := Test03()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;V1=%d,V2=%s,V3=%s,v4=%d,v5=%s\n&quot;</span>, v1, v2, v3, v4, v5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="有参有返回值"><a href="#有参有返回值" class="headerlink" title="有参有返回值"></a>有参有返回值</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max_element</span><span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> (max <span class="type">int</span>, min <span class="type">int</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> num1 &gt; num2 &#123;</span><br><span class="line">		min = num2</span><br><span class="line">		max = num1</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		min = num1</span><br><span class="line">		max = num2</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> max, min</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v1, v2 := max_element(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v1_max=%d,v2_min=%d\n&quot;</span>, v1, v2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环实现1+2+3+....100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test01</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ &#123;</span><br><span class="line">		sum = sum + i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归实现1+2+3+....100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test02</span><span class="params">(num <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> num == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> num + Test02(num<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	result := Test01()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;result=%d\n&quot;</span>, result)</span><br><span class="line">	result2 := Test02(<span class="number">100</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;result2=%d\n&quot;</span>, result2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FuncType <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">int</span>  <span class="comment">//声明一个函数类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test01</span><span class="params">(a, b <span class="type">int</span>, f FuncType)</span></span> (result <span class="type">int</span>) &#123;</span><br><span class="line">	result = f(a, b)</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Minus</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v1 := Test01(<span class="number">1</span>, <span class="number">2</span>, Add)</span><br><span class="line">	v2 := Test01(<span class="number">1</span>, <span class="number">2</span>, Minus)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v1=%d,v2=%d\n&quot;</span>, v1, v2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>函数有一个参数是函数类型，这个函数就是回调函数</p>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	str := <span class="string">&quot;mike&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//匿名函数，没有函数名字，函数定义，还没有调用</span></span><br><span class="line">	f1 := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; <span class="comment">//:=自动推导类型</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">		fmt.Println(<span class="string">&quot;str=&quot;</span>, str)</span><br><span class="line">	&#125;</span><br><span class="line">	f1()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//给一个函数类型起别名</span></span><br><span class="line">	<span class="keyword">type</span> FuncType <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="comment">//函数没有参数和返回值</span></span><br><span class="line">	<span class="comment">//声明变量</span></span><br><span class="line">	<span class="keyword">var</span> f2 FuncType</span><br><span class="line">	f2 = f1</span><br><span class="line">	f2()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//定义匿名函数，同时调用</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">		fmt.Println(<span class="string">&quot;str=&quot;</span>, str)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//带参数的匿名函数</span></span><br><span class="line">	f3 := <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;i=%d,j=%d\n&quot;</span>, i, j)</span><br><span class="line">	&#125;</span><br><span class="line">	f3(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//定义匿名函数，同时调用</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;i=%d,j=%d\n&quot;</span>, i, j)</span><br><span class="line">	&#125;(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//匿名函数，有参有返回值</span></span><br><span class="line">	x, y := <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> (max, min <span class="type">int</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> i &gt; j &#123;</span><br><span class="line">			max = i</span><br><span class="line">			min = j</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			max = j</span><br><span class="line">			min = i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x=%d,y=%d\n&quot;</span>, x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>所谓闭包就是一个函数“捕获”了和它在同一作用域的其它常量和变量。这就意味着当闭包被调用的时候，不管在程序什么地方调用，闭包能够使用这些常量或者变量。<strong>它不关心这些捕获了的变量和常量是否已经超出了作用域，所以只有闭包还在使用它，这些变量就还会存在。</strong></p>
<p>在 Go 语言里，所有的匿名函数(Go 语言规范中称之为函数字面量)都是闭包。匿名函数是指不需要定义函数名的一种函数实现方式，它并不是一个新概念，最早可以回溯到 1958 年的Lisp 语言</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a := <span class="number">10</span></span><br><span class="line">   str := <span class="string">&quot;mike&quot;</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="comment">//闭包是以引用方式捕获外部变量</span></span><br><span class="line">      a = <span class="number">100</span></span><br><span class="line">      str = <span class="string">&quot;go&quot;</span></span><br><span class="line">      fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">      fmt.Println(<span class="string">&quot;str=&quot;</span>, str)</span><br><span class="line">   &#125;()</span><br><span class="line">   fmt.Println(<span class="string">&quot;a=&quot;</span>, a)</span><br><span class="line">   fmt.Println(<span class="string">&quot;str=&quot;</span>, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test01</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">   <span class="comment">//函数被调用时，x才分配空间，才初始化为0</span></span><br><span class="line">   <span class="keyword">var</span> x <span class="type">int</span> <span class="comment">//没有初始化，值为0</span></span><br><span class="line">   x++</span><br><span class="line">   <span class="keyword">return</span> x * x <span class="comment">//函数调用完毕,x自动释放</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test02</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> x <span class="type">int</span></span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123; <span class="comment">//匿名函数</span></span><br><span class="line">      x++ <span class="comment">//捕获外部变量</span></span><br><span class="line">      <span class="keyword">return</span> x * x</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(Test01())</span><br><span class="line">   fmt.Println(Test01())</span><br><span class="line">   fmt.Println(Test01())</span><br><span class="line"></span><br><span class="line">   f := Test02()</span><br><span class="line">   fmt.Println(f())</span><br><span class="line">   fmt.Println(f())</span><br><span class="line">   fmt.Println(f())</span><br><span class="line">   fmt.Println(f())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="defer的作用"><a href="#defer的作用" class="headerlink" title="defer的作用"></a>defer的作用</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215202722509.png"
                      alt="image-20221215202722509"
                ></p>
<h3 id="多个defer执行顺序"><a href="#多个defer执行顺序" class="headerlink" title="多个defer执行顺序"></a>多个defer执行顺序</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215203014678.png"
                      alt="image-20221215203014678"
                ></p>
<h3 id="defer和匿名函数结合使用"><a href="#defer和匿名函数结合使用" class="headerlink" title="defer和匿名函数结合使用"></a>defer和匿名函数结合使用</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215203433903.png"
                      alt="image-20221215203433903"
                ></p>
<p>我的理解：a是值传递（实参已经先给匿名函数了），b不是值传递</p>
<h3 id="获取命令行参数"><a href="#获取命令行参数" class="headerlink" title="获取命令行参数"></a>获取命令行参数</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215203842052.png"
                      alt="image-20221215203842052"
                ></p>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215205057825.png"
                      alt="image-20221215205057825"
                ></p>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215205731365.png"
                      alt="image-20221215205731365"
                ></p>
<h3 id="不同作用域同名变量"><a href="#不同作用域同名变量" class="headerlink" title="不同作用域同名变量"></a>不同作用域同名变量</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215205919330.png"
                      alt="image-20221215205919330"
                ></p>
<h1 id="6-工程管理"><a href="#6-工程管理" class="headerlink" title="6.工程管理"></a>6.工程管理</h1><p>在实际的开发工作中，直接调用编译器进行编译和链接的场景是少而又少，因为在工程中不会简单到只有一个源代码文件，且源文件之间会有相互的依赖关系。如果这样一个文件一个文件逐步编译，那不亚于一场灾难。 Go 语言的设计者作为行业老将，自然不会忽略这一点。早期 Go 语言使用 makefile 作为临时方案，到了 Go 1 发布时引入了强大无比的 Go 命令行工具。</p>
<p>Go 命令行工具的革命性之处在于彻底消除了工程文件的概念，完全用目录结构和包名来推导工程结构和构建顺序。针对只有一个源文件的情况讨论工程管理看起来会比较多余，因为这可以直接用 go run 和 go build 搞定。下面我们将用一个更接近现实的虚拟项目来展示 Go语言的基本工程管理方法。</p>
<h3 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h3><h4 id="工作区介绍"><a href="#工作区介绍" class="headerlink" title="工作区介绍"></a>工作区介绍</h4><p><strong>Go 代码必须放在工作区中</strong>。工作区其实就是一个对应于特定工程的目录，它应包含 3 个子目录：src 目录、pkg 目录和 bin 目录。</p>
<ul>
<li>src 目录：用于以代码包的形式组织并保存 Go 源码文件。（比如：.go .c .h .s 等）</li>
<li>pkg 目录：用于存放经由 go install 命令构建安装后的代码包（包含 Go 库源码文件）的“.a”归档文件。</li>
<li>bin 目录：与 pkg 目录类似，在通过 go install 命令完成安装后，保存由 Go 命令源码文件生成的可执行文件。</li>
</ul>
<p>​		目录 src 用于包含所有的源代码，是 Go 命令行工具一个强制的规则，而 pkg 和 bin 则无需手动创建，如果必要 Go 命令行工具在构建过程中会自动创建这些目录。</p>
<p>​		需要特别注意的是，只有当环境变量 GOPATH 中只包含一个工作区的目录路径时，go install命令才会把命令源码安装到当前工作区的 bin 目录下。<strong>若环境变量 GOPATH 中包含多个工作区的目录路径，像这样执行 go install 命令就会失效，此时必须设置环境变量 GOBIN。</strong></p>
<h4 id="GOPATH"><a href="#GOPATH" class="headerlink" title="GOPATH"></a>GOPATH</h4><p>​		为了能够构建这个工程，需要先把所需工程的根目录加入到环境变量 GOPATH 中。否则，即使处于同一工作目录(工作区)，代码之间也无法通过绝对代码包路径完成调用。</p>
<p>​		在实际开发环境中，工作目录往往有多个。这些工作目录的目录路径都需要添加至 GOPATH。当有多个目录时，请注意分隔符，多个目录的时候 Windows 是分号，Linux 系统是冒号，当有多个 GOPATH 时，默认会将 go get 的内容放在第一个目录下。</p>
<h3 id="包"><a href="#包" class="headerlink" title="包"></a>包</h3><p>​		所有 Go 语言的程序都会组织成若干组文件，每组文件被称为一个包。这样每个包的代码都可以作为很小的复用单元，被其他项目引用。</p>
<p>​		一个包的源代码保存在一个或多个以.go 为文件后缀名的源文件中，通常一个包所在目录路径的后缀是包的导入路径</p>
<h4 id="自定义包"><a href="#自定义包" class="headerlink" title="自定义包"></a>自定义包</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224334376.png"
                      alt="image-20221215224334376"
                ></p>
<p><strong>注意：同一个目录下不能定义不同的 package。</strong></p>
<h4 id="main包"><a href="#main包" class="headerlink" title="main包"></a>main包</h4><p>​		在 Go 语言里，命名为 main 的包具有特殊的含义。 Go 语言的编译程序会试图把这种名字的包编译为二进制可执行文件。<strong>所有用 Go 语言编译的可执行程序都必须有一个名叫 main的包。一个可执行程序有且仅有一个 main 包。</strong></p>
<p>​		当编译器发现某个包的名字为 main 时，它一定也会发现名为 main()的函数，否则不会创建可执行文件。 main()函数是程序的入口，所以，如果没有这个函数，程序就没有办法开始执行。程序编译时，会使用声明 main 包的代码所在的目录的目录名作为二进制可执行文件的文件名。</p>
<h4 id="main函数和init函数"><a href="#main函数和init函数" class="headerlink" title="main函数和init函数"></a>main函数和init函数</h4><p>​		Go 里面有两个保留的函数：init 函数（能够应用于所有的 package）和 main 函数（只能应用于 package main）。这两个函数在定义时不能有任何的参数和返回值。虽然一个 package里面可以写任意多个 init 函数，但这无论是对于可读性还是以后的可维护性来说，我们都强烈建议用户在一个 package 中每个文件只写一个 init 函数。</p>
<p>​		Go 程序会自动调用 init()和 main()，所以你不需要在任何地方调用这两个函数。每个 package中的 init 函数都是可选的，<strong>但 package main 就必须包含一个 main 函数。</strong></p>
<p>​		每个包可以包含任意多个 init 函数，这些函数都会在程序执行开始的时候被调用。所有被编译器发现的 init 函数都会安排在 main 函数之前执行。 init 函数用在设置包、初始化变量或者其他要在程序运行前优先完成的引导工作。</p>
<p>​		程序的初始化和执行都起始于 main 包。如果 main 包还导入了其它的包，那么就会在编译时将它们依次导入。</p>
<p>​		有时一个包会被多个包同时导入，那么它只会被导入一次（例如很多包可能都会用到 fmt包，但它只会被导入一次，因为没有必要导入多次）。</p>
<p>​		当一个包被导入时，如果该包还导入了其它的包，那么会先将其它包导入进来，然后再对这些包中的包级常量和变量进行初始化，接着执行 init 函数（如果有的话），依次类推。等所有被导入的包都加载完毕了，就会开始对 main 包中的包级常量和变量进行初始化，然后执行 main 包中的 init 函数（如果存在的话），最后执行 main 函数。下图详细地解释了整个执行过程：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224716784.png"
                      alt="image-20221215224716784"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224729605.png"
                      alt="image-20221215224729605"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224737332.png"
                      alt="image-20221215224737332"
                ></p>
<h4 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224820397.png"
                      alt="image-20221215224820397"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224833904.png"
                      alt="image-20221215224833904"
                ></p>
<h3 id="测试案例"><a href="#测试案例" class="headerlink" title="测试案例"></a>测试案例</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224918733.png"
                      alt="image-20221215224918733"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224928810.png"
                      alt="image-20221215224928810"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215224948071.png"
                      alt="image-20221215224948071"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215225004996.png"
                      alt="image-20221215225004996"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221215225016677.png"
                      alt="image-20221215225016677"
                ></p>
<h1 id="7-复合类型"><a href="#7-复合类型" class="headerlink" title="7.复合类型"></a>7.复合类型</h1><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>长度</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pointer</td>
<td>指针</td>
<td></td>
<td>nil</td>
<td></td>
</tr>
<tr>
<td>array</td>
<td>数组</td>
<td></td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>slice</td>
<td>切片</td>
<td></td>
<td>nil</td>
<td>引用类型</td>
</tr>
<tr>
<td>map</td>
<td>字典</td>
<td></td>
<td>nil</td>
<td>引用类型</td>
</tr>
<tr>
<td>struct</td>
<td>结构体</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>​		指针是一个代表着某个内存地址的值。这个内存地址往往是在内存中存储的另一个变量的值的起始位置。Go 语言对指针的支持介于 Java 语言和 C&#x2F;C++语言之间，它既没有想 Java 语言那样取消了代码对指针的直接操作的能力，也避免了 C&#x2F;C++语言中由于对指针的滥用而造成的安全和可靠性问题。</p>
<h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p>Go 语言虽然保留了指针，但与其它编程语言不同的是：</p>
<ul>
<li>默认值 nil，没有 NULL 常量</li>
<li>操作符 “&amp;” 取变量地址， “*” 通过指针访问目标对象</li>
<li>不支持指针运算，不支持 “-&gt;” 运算符，直接⽤ “.” 访问目标成员</li>
</ul>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span>            <span class="comment">//声明一个变量，同时初识化</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;a=%p\n&quot;</span>, &amp;a) <span class="comment">//操作符“&amp;” 取变量地址</span></span><br><span class="line">	<span class="keyword">var</span> p *<span class="type">int</span> = <span class="literal">nil</span>          <span class="comment">//声明一个变量p,类型为*int,指针类型</span></span><br><span class="line">	p = &amp;a</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p=%p\n&quot;</span>, p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d,*p=%d\n&quot;</span>, a, *p)</span><br><span class="line"></span><br><span class="line">	*p = <span class="number">111</span> <span class="comment">//*p操作指针所指向的内存，即为a</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%d,*p=%d\n&quot;</span>, a, *p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="new函数"><a href="#new函数" class="headerlink" title="new函数"></a>new函数</h4><p>​		表达式 new(T)将创建一个 T 类型的匿名变量，所做的是为 T 类型的新值分配并清零一块内存空间，然后将这块内存空间的地址作为结果返回，而这个结果就是指向这个新的 T 类型值的指针值，返回的指针类型为*T。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p *<span class="type">int</span></span><br><span class="line">	p = <span class="built_in">new</span>(<span class="type">int</span>)          <span class="comment">//P为*int类型，指向匿名的int变量</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;p=&quot;</span>, *p) <span class="comment">//*p=0</span></span><br><span class="line"></span><br><span class="line">	p2 := <span class="built_in">new</span>(<span class="type">int</span>) <span class="comment">//p2为*int类型，指向匿名的int变量</span></span><br><span class="line">	*p2 = <span class="number">111</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;p=&quot;</span>, *p)</span><br><span class="line">	fmt.Println(<span class="string">&quot;p2=&quot;</span>, *p2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>​		我们只需使用 new()函数，无需担心其内存的生命周期或怎样将其删除，因为 Go 语言的内存管理系统会帮我们打理一切。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221217141754378.png"
                      alt="image-20221217141754378"
                ></p>
<h4 id="指针做函数参数"><a href="#指针做函数参数" class="headerlink" title="指针做函数参数"></a>指针做函数参数</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">   a, b = b, a</span><br><span class="line">   fmt.Printf(<span class="string">&quot;a=%d,b=%d\n&quot;</span>, a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap02</span><span class="params">(a, b *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">   *a, *b = *b, *a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">   <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">20</span></span><br><span class="line">   <span class="comment">//swap(a, b)</span></span><br><span class="line">   swap02(&amp;a, &amp;b)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;a=%d,b=%d\n&quot;</span>, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221217142558460.png"
                      alt="image-20221217142558460"
                ></p>
<h4 id="操作数组"><a href="#操作数组" class="headerlink" title="操作数组"></a>操作数组</h4><p>数组的每个元素可以通过索引下标来访问，索引下标的范围是从 0 开始到数组长度减 1 的位置。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a [<span class="number">10</span>]<span class="type">int</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a[i] = i + <span class="number">1</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;a[%d]=%d\n&quot;</span>, i, a[i])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> a &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;a[%d]=%d\n&quot;</span>, i, data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>内置函数 len(长度) 和 cap(容量) 都返回数组⻓度 (元素数量) ——数组长度固定所以值相同</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">10</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))			<span class="comment">//10 10</span></span><br></pre></td></tr></table></figure></div>



<p>初始化：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	未初始化元素值为 0</span></span><br><span class="line"><span class="comment">	通过初始化值确定数组长度</span></span><br><span class="line"><span class="comment">	通过索引号初始化元素，未初始化元素值为 0</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> a &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;data=&quot;</span>, data)</span><br><span class="line">	&#125;</span><br><span class="line">	b := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> b &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;data=&quot;</span>, data)</span><br><span class="line">	&#125;</span><br><span class="line">	c := [<span class="number">5</span>]<span class="type">int</span>&#123;<span class="number">2</span>: <span class="number">100</span>, <span class="number">4</span>: <span class="number">100</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> c &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;data=&quot;</span>, data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221217143946680.png"
                      alt="image-20221217143946680"
                ></p>
<h4 id="在函数传递数组"><a href="#在函数传递数组" class="headerlink" title="在函数传递数组"></a>在函数传递数组</h4><p>​		根据内存和性能来看，在函数间传递数组是一个开销很大的操作。在函数之间传递变量时，总是以值的方式传递的。如果这个变量是一个数组，意味着整个数组，不管有多长，都会完整复制，并传递给函数。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(array [5]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">   array[<span class="number">0</span>] = <span class="number">10</span> <span class="comment">//试图修改数组的第一个元素</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;In modify(),array values:&quot;</span>, array)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   array := [<span class="number">5</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">   modify(array)</span><br><span class="line">   fmt.Println(<span class="string">&quot;In main(),array values:&quot;</span>, array)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="数组指针做函数参数"><a href="#数组指针做函数参数" class="headerlink" title="数组指针做函数参数"></a>数组指针做函数参数</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(array *[5]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	(*array)[<span class="number">0</span>] = <span class="number">10</span> <span class="comment">//试图修改数组的第一个元素</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;In modify(),array values:&quot;</span>, *array)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	array := [<span class="number">5</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	modify(&amp;array)</span><br><span class="line">	fmt.Println(<span class="string">&quot;In main(),array values:&quot;</span>, array)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>  main</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BubbleSort</span><span class="params">(arr []<span class="type">int</span>)</span></span>[]<span class="type">int</span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="built_in">len</span>(arr) - <span class="number">1</span>; i++&#123;</span><br><span class="line">		<span class="keyword">for</span> j:= <span class="number">0</span>; j&lt;<span class="built_in">len</span>(arr)<span class="number">-1</span>-i; j++&#123;</span><br><span class="line">			<span class="keyword">if</span> arr[j] &gt; arr[j+<span class="number">1</span>]&#123;</span><br><span class="line">				arr[j],arr[j+<span class="number">1</span>] = arr[j+<span class="number">1</span>],arr[j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	arr := []<span class="type">int</span>&#123;<span class="number">23</span>,<span class="number">45</span>,<span class="number">13</span>,<span class="number">67</span>,<span class="number">35</span>&#125;</span><br><span class="line">	fmt.Println(BubbleSort(arr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 我们一般使用系统时间的不确定性来进行初始化</span></span><br><span class="line">	rand.Seed(time.Now().Unix())</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Print(rand.Intn(<span class="number">10</span>), <span class="string">&quot; &quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221217145718001.png"
                      alt="image-20221217145718001"
                ></p>
<h4 id="切片的创建和初始化"><a href="#切片的创建和初始化" class="headerlink" title="切片的创建和初始化"></a>切片的创建和初始化</h4><p>slice 和数组的区别：声明数组时，方括号内写明了数组的长度或使用…自动计算长度，而声明 slice 时，方括号内没有任何字符。</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var s1 []int //声明切片和声明array一样，只是少了长度，此为空切片（nil)</span><br><span class="line">	s2 := []int&#123;&#125;</span><br><span class="line">	//make([]T,length,capacity) //capacity省略，则和length的值相同</span><br><span class="line">	var s3 []int = make([]int, 0)</span><br><span class="line">	s4 := make([]int, 0, 0)</span><br><span class="line">	s5 := []int&#123;1, 2, 3&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>注意</strong>：make 只能创建 slice、map 和 channel，并且返回一个有初始值(非零)。</p>
<h4 id="切片的操作"><a href="#切片的操作" class="headerlink" title="切片的操作"></a>切片的操作</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221219165855781.png"
                      alt="image-20221219165855781"
                ></p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">	s1 := s[<span class="number">2</span>:<span class="number">5</span>]       <span class="comment">//[2 3 4]</span></span><br><span class="line">	s1[<span class="number">2</span>] = <span class="number">100</span>        <span class="comment">//修改切片某个元素改变底层数组</span></span><br><span class="line">	fmt.Println(s1, s) <span class="comment">//[2 3 100] [0 1 2 3 100 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">	s2 := s1[<span class="number">2</span>:<span class="number">6</span>] <span class="comment">//新切片依旧指向原底层数组 [100 5 6 7]</span></span><br><span class="line">	s2[<span class="number">3</span>] = <span class="number">200</span></span><br><span class="line">	fmt.Println(s2, s)</span><br><span class="line">	<span class="comment">//[100 5 6 200]  [0 1 2 3 100 5 6 200 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>append 函数向 slice 尾部添加数据，返回新的 slice 对象：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span> <span class="comment">//创建nil切换</span></span><br><span class="line">	<span class="comment">//s1:=make([]int,0)</span></span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="number">1</span>)</span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">	fmt.Println(s1)</span><br><span class="line"></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>)</span><br><span class="line">	s2 = <span class="built_in">append</span>(s2, <span class="number">6</span>)</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line"></span><br><span class="line">	s3 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	s3 = <span class="built_in">append</span>(s3, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Println(s3)</span><br><span class="line">	<span class="comment">//分别输出</span></span><br><span class="line">	<span class="comment">//[1 2 3 4 5 6]</span></span><br><span class="line">	<span class="comment">//[0 0 0 0 0 6]</span></span><br><span class="line">	<span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>append 函数会智能地底层数组的容量增长，一旦超过原底层数组容量，通常以 2 倍容量重新分配底层数组，并复制原来的数据：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">	c := <span class="built_in">cap</span>(s)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">50</span>; i++ &#123;</span><br><span class="line">		s = <span class="built_in">append</span>(s, i)</span><br><span class="line">		<span class="keyword">if</span> n := <span class="built_in">cap</span>(s); n &gt; c &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;cap:%d---&gt;%d\n&quot;</span>, c, n)</span><br><span class="line">			c = n</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>函数 copy 在两个 slice 间复制数据，复制⻓度以 len 小的为准，两个 slice 可指向同⼀底层数组。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   data := [...]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   s1 := data[<span class="number">8</span>:] <span class="comment">//&#123;8 9&#125;</span></span><br><span class="line">   s2 := data[:<span class="number">5</span>] <span class="comment">//&#123;0 1 2 3 4&#125;</span></span><br><span class="line">   <span class="built_in">copy</span>(s2, s1)</span><br><span class="line"></span><br><span class="line">   fmt.Println(s2)   <span class="comment">//[8 9 2 3 4]</span></span><br><span class="line">   fmt.Println(data) <span class="comment">//[8 9 2 3 4 5 6 7 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="切片做函数参数"><a href="#切片做函数参数" class="headerlink" title="切片做函数参数"></a>切片做函数参数</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(s []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	s[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;test:&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;s[%d]=%d, &quot;</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">	test(s1)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main:&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> s1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;s[%d]=%d, &quot;</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>









<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221217220339652.png"
                      alt="image-20221217220339652"
                ></p>
<h4 id="map的创建"><a href="#map的创建" class="headerlink" title="map的创建"></a>map的创建</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>  <span class="comment">//只是声明一个map，没有初始化，此为空map--nil</span></span><br><span class="line">	fmt.Println(m1 == <span class="literal">nil</span>) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//m2,m3的创建方法是等价的</span></span><br><span class="line">	m2 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;&#125;</span><br><span class="line">	m3 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>)</span><br><span class="line">	fmt.Println(m2, m3) <span class="comment">//map[] map[]</span></span><br><span class="line"></span><br><span class="line">	m4 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>, <span class="number">10</span>) <span class="comment">//第二个参数指定容量</span></span><br><span class="line">	fmt.Println(m4)                <span class="comment">//map[]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//定义并初始化</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span> = <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">	fmt.Println(m1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.自动推导类型：=</span></span><br><span class="line">	m2 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">	fmt.Println(m2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">	m1[<span class="number">1</span>] = <span class="string">&quot;xxx&quot;</span>   <span class="comment">//修改</span></span><br><span class="line">	m1[<span class="number">3</span>] = <span class="string">&quot;lily&quot;</span>  <span class="comment">//追加，go底层会自动为map分配空间</span></span><br><span class="line">	fmt.Println(m1) <span class="comment">//map[1:xxx,2:yoo,3:lily]</span></span><br><span class="line"></span><br><span class="line">	m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>, <span class="number">10</span>) <span class="comment">//创建map</span></span><br><span class="line">	m2[<span class="number">0</span>] = <span class="string">&quot;aaa&quot;</span></span><br><span class="line">	m2[<span class="number">1</span>] = <span class="string">&quot;bbb&quot;</span></span><br><span class="line">	fmt.Println(m2)           <span class="comment">//map[o:aaa,1:bbb]</span></span><br><span class="line">	fmt.Println(m2[<span class="number">0</span>], m2[<span class="number">1</span>]) <span class="comment">//aaa bbb</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">	<span class="comment">//迭代遍历1，第一个返回值是key，第二个返回值是value</span></span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%d——&gt;%s\n&quot;</span>, k, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//迭代遍历2，第一个返回值是key，第二个返回值是value（可忽略）</span></span><br><span class="line">	<span class="keyword">for</span> k := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%d——&gt;%s\n&quot;</span>, k, m1[k])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//判断某个key所对应的value是否存在,第一个返回值为value（如果该值存在，不存在，value无值）</span></span><br><span class="line">	value, ok := m1[<span class="number">1</span>]</span><br><span class="line">	fmt.Println(value, ok)</span><br><span class="line"></span><br><span class="line">	value2, ok2 := m1[<span class="number">3</span>]</span><br><span class="line">	fmt.Println(value2, ok2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">   <span class="comment">//迭代遍历1，第一个返回值是key，第二个返回值是value</span></span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;%d——&gt;%s\n&quot;</span>, k, v)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">delete</span>(m1, <span class="number">2</span>) <span class="comment">//删除m1中key值为2的那个</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;_____&quot;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;%d——&gt;%s\n&quot;</span>, k, v)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="map做函数参数"><a href="#map做函数参数" class="headerlink" title="map做函数参数"></a>map做函数参数</h4><p>在函数间传递映射并不会制造出该映射的一个副本，不是值传递，而是引用传递：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DeleteMap</span><span class="params">(m <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>, key <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="built_in">delete</span>(m, key)</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;len(m)=%d,%d——&gt;%s\n&quot;</span>, <span class="built_in">len</span>(m), k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;mike&quot;</span>, <span class="number">2</span>: <span class="string">&quot;yoo&quot;</span>&#125;</span><br><span class="line">	DeleteMap(m, <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;len(m)=%d,%d——&gt;%s\n&quot;</span>, <span class="built_in">len</span>(m), k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><h4 id="结构体类型"><a href="#结构体类型" class="headerlink" title="结构体类型"></a>结构体类型</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221219142934946.png"
                      alt="image-20221219142934946"
                ></p>
<h4 id="结构体初始化"><a href="#结构体初始化" class="headerlink" title="结构体初始化"></a>结构体初始化</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//顺序初始化，每一个成员都要初始化</span></span><br><span class="line">	<span class="keyword">var</span> s1 Student = Student&#123;<span class="number">1</span>, <span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Println(s1)</span><br><span class="line">	s2 := Student&#123;<span class="number">2</span>, <span class="string">&quot;yoo&quot;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line">	<span class="comment">//指定初始化某个成员，没有初始化的成员为零值</span></span><br><span class="line">	s3 := Student&#123;id: <span class="number">2</span>, name: <span class="string">&quot;lily&quot;</span>&#125;</span><br><span class="line">	fmt.Println(s3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">   id      <span class="type">int</span></span><br><span class="line">   name    <span class="type">string</span></span><br><span class="line">   sex     <span class="type">byte</span></span><br><span class="line">   age     <span class="type">int</span></span><br><span class="line">   address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">//指针变量</span></span><br><span class="line">   <span class="keyword">var</span> s5 *Student = &amp;Student&#123;<span class="number">3</span>, <span class="string">&quot;zhou&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;beijing&quot;</span>&#125;</span><br><span class="line">   fmt.Println(*s5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="结构体成员的使用"><a href="#结构体成员的使用" class="headerlink" title="结构体成员的使用"></a>结构体成员的使用</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 Student = Student&#123;<span class="number">1</span>, <span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;id=%d,name=%s,sex=%c,age=%d,address=%s\n&quot;</span>, s1.id, s1.name, s1.sex, s1.age, s1.address)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s2 Student</span><br><span class="line">	s2.id = <span class="number">2</span></span><br><span class="line">	s2.name = <span class="string">&quot;lily&quot;</span></span><br><span class="line">	s2.sex = <span class="string">&#x27;m&#x27;</span></span><br><span class="line">	s2.age = <span class="number">18</span></span><br><span class="line">	s2.address = <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">	fmt.Println(s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//先分配空间，再赋值</span></span><br><span class="line">	s3 := <span class="built_in">new</span>(Student)</span><br><span class="line">	s3.id = <span class="number">3</span></span><br><span class="line">	s3.name = <span class="string">&quot;xxx&quot;</span></span><br><span class="line">	fmt.Println(s3, *s3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//普通变量和指针变量类型打印</span></span><br><span class="line">	<span class="keyword">var</span> s4 Student = Student&#123;<span class="number">4</span>, <span class="string">&quot;yyy&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Println(s4, &amp;s4)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//p.成员和(*p).成员操作是等价的</span></span><br><span class="line">	<span class="keyword">var</span> p *Student = &amp;s4</span><br><span class="line">	p.id = <span class="number">5</span></span><br><span class="line">	(*p).name = <span class="string">&quot;zzz&quot;</span></span><br><span class="line">	fmt.Println(p, *p, s4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="结构体比较"><a href="#结构体比较" class="headerlink" title="结构体比较"></a>结构体比较</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s4 Student = Student&#123;<span class="number">4</span>, <span class="string">&quot;yyy&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> s5 Student = Student&#123;<span class="number">4</span>, <span class="string">&quot;yyy&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;s4==s5&quot;</span>, s4 == s5)</span><br><span class="line">	fmt.Println(<span class="string">&quot;s4!=s5&quot;</span>, s4 != s5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="结构体作为函数参数"><a href="#结构体作为函数参数" class="headerlink" title="结构体作为函数参数"></a>结构体作为函数参数</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printStudentValue</span><span class="params">(tmp Student)</span></span> &#123;</span><br><span class="line">	tmp.id = <span class="number">250</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;printStudentValue tmp=&quot;</span>, tmp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s4 Student = Student&#123;<span class="number">4</span>, <span class="string">&quot;yyy&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	printStudentValue(s4) <span class="comment">//值传递,形参修改不影响实参</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;main s4=&quot;</span>, s4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">	sex     <span class="type">byte</span></span><br><span class="line">	age     <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printStudentValue</span><span class="params">(tmp *Student)</span></span> &#123;</span><br><span class="line">	tmp.id = <span class="number">250</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;printStudentValue tmp=&quot;</span>, tmp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s4 Student = Student&#123;<span class="number">4</span>, <span class="string">&quot;yyy&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	printStudentValue(&amp;s4) <span class="comment">//引用传递,形参修改影响实参</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;main s4=&quot;</span>, s4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="可见性"><a href="#可见性" class="headerlink" title="可见性"></a>可见性</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221219150118006.png"
                      alt="image-20221219150118006"
                ></p>
<h1 id="8-面向对象编程"><a href="#8-面向对象编程" class="headerlink" title="8.面向对象编程"></a>8.面向对象编程</h1><h3 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h3><p>​		对于面向对象编程的支持 Go 语言设计得非常简洁而优雅。因为， Go 语言并没有沿袭传统面向对象编程中的诸多概念，比如继承(不支持继承，尽管匿名字段的内存布局和行为类似继承，但它并不是继承)、虚函数、构造函数和析构函数、隐藏的 this 指针等。</p>
<p>尽管 Go 语言中没有封装、继承、多态这些概念，但同样通过别的方式实现这些特性：</p>
<ul>
<li>封装：通过方法实现</li>
<li>继承：通过匿名字段实现</li>
<li>多态：通过接口实现</li>
</ul>
<h3 id="匿名组合"><a href="#匿名组合" class="headerlink" title="匿名组合"></a>匿名组合</h3><p>​		一般情况下，定义结构体的时候是字段名与其类型一一对应，实际上 Go 支持只提供类型，而不写字段名的方式，也就是匿名字段，也称为嵌入字段。</p>
<p>​		当匿名字段也是一个结构体的时候，那么这个结构体所拥有的全部字段都被隐式地引入了当前定义的这个结构体。</p>
<h4 id="匿名字段，初始化"><a href="#匿名字段，初始化" class="headerlink" title="匿名字段，初始化"></a>匿名字段，初始化</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 人</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person  <span class="comment">//匿名字段，那么默认Student就包含了Person的所有字段</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//顺序初始化</span></span><br><span class="line">	s1 := Student&#123;Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;, <span class="number">1</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1)</span><br><span class="line">	<span class="comment">//	s2 := Student&#123;&quot;mike&quot;, &#x27;m&#x27;, 18, 1, &quot;shanghai&quot;&#125;-&gt;error!</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//部分成员初始化1</span></span><br><span class="line">	s3 := Student&#123;Person: Person&#123;<span class="string">&quot;lily&quot;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">19</span>&#125;, id: <span class="number">2</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s3=%v\n&quot;</span>, s3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//部分成员初始化2</span></span><br><span class="line">	s4 := Student&#123;Person: Person&#123;name: <span class="string">&quot;Tom&quot;</span>&#125;, id: <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s4=%v\n&quot;</span>, s4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="成员的操作"><a href="#成员的操作" class="headerlink" title="成员的操作"></a>成员的操作</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 人</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生</span></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person  <span class="comment">//匿名字段，那么默认Student就包含了Person的所有字段</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 Student <span class="comment">//变量声明</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	s1.name = <span class="string">&quot;mike&quot;</span></span><br><span class="line">	s1.sex = <span class="string">&#x27;m&#x27;</span></span><br><span class="line">	s1.age = <span class="number">18</span></span><br><span class="line">	s1.id = <span class="number">1</span></span><br><span class="line">	s1.address = <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">	fmt.Println(s1) <span class="comment">//&#123;&#123;mike 109 18&#125; 1 shanghai&#125;</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> s2 Student <span class="comment">//变量声明</span></span><br><span class="line">	s2.Person = Person&#123;<span class="string">&quot;Lily&quot;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">19</span>&#125;</span><br><span class="line">	s2.id = <span class="number">2</span></span><br><span class="line">	s2.address = <span class="string">&quot;beijing&quot;</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">//	&#123;&#123;Lily 102 19&#125; 2 beijing&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="同名字段"><a href="#同名字段" class="headerlink" title="同名字段"></a>同名字段</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 人</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person  <span class="comment">//匿名字段，那么默认Student就包含了Person的所有字段</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">	name    <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 Student <span class="comment">//变量声明</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//给Student的name，还是给Person赋值？</span></span><br><span class="line">	s1.name = <span class="string">&quot;mike&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//默认只会给最外层的成员赋值</span></span><br><span class="line">	<span class="comment">//给匿名同名成员赋值，需要显示调用</span></span><br><span class="line">	s1.Person.name = <span class="string">&quot;lily&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//&#123;&#123; 0 0&#125; 0  mike&#125;</span></span><br><span class="line">	<span class="comment">//&#123;&#123;lily 0 0&#125; 0  mike&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="其他匿名字段"><a href="#其他匿名字段" class="headerlink" title="其他匿名字段"></a>其他匿名字段</h4><p>所有的内置类型和自定义类型都是可以作为匿名字段的：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> mystr <span class="type">string</span> <span class="comment">//自定义类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person <span class="comment">//匿名字段，结构体类型</span></span><br><span class="line">	<span class="type">int</span>    <span class="comment">//匿名字段，内置类型</span></span><br><span class="line">	mystr  <span class="comment">//匿名字段，自定义类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//初始化</span></span><br><span class="line">	s1 := Student&#123;Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;, <span class="number">1</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s, %c,%d,%d,%s\n&quot;</span>, s1.name, s1.sex, s1.age, s1.<span class="type">int</span>, s1.mystr)</span><br><span class="line">	<span class="comment">//&#123;&#123;mike 109 18&#125; 1 shanghai&#125;</span></span><br><span class="line">	<span class="comment">//mike, m,18,1,shanghai</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>结构体指针</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	*Person <span class="comment">//匿名字段，结构体指针类型</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//初始化</span></span><br><span class="line">	s1 := Student&#123;&amp;Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;, <span class="number">1</span>, <span class="string">&quot;beijing&quot;</span>&#125;</span><br><span class="line">	<span class="comment">//&#123;0xc0000543c0 1 beijing&#125;</span></span><br><span class="line">	<span class="comment">//mike,m,18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s,%c,%d\n&quot;</span>, s1.name, s1.sex, s1.age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//声明变量</span></span><br><span class="line">	<span class="keyword">var</span> s2 Student</span><br><span class="line">	s2.Person = <span class="built_in">new</span>(Person)</span><br><span class="line">	s2.name = <span class="string">&quot;Lily&quot;</span></span><br><span class="line">	s2.sex = <span class="string">&#x27;f&#x27;</span></span><br><span class="line">	s2.age = <span class="number">20</span></span><br><span class="line">	s2.id = <span class="number">2</span></span><br><span class="line">	s2.address = <span class="string">&quot;shanghai&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Lily 102 20 2 shanghai</span></span><br><span class="line">	fmt.Println(s2.name, s2.sex, s2.age, s2.id, s2.address)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><h4 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h4><p>​		在面向对象编程中，一个对象其实也就是一个简单的值或者一个变量，在这个对象中会包含一些函数，**这种带有接收者的函数，我们称为方法(method)**。 本质上，一个方法则是一个和特殊类型关联的函数。</p>
<p>​		一个面向对象的程序会用方法来表达其属性和对应的操作，这样使用这个对象的用户就不需要直接去操作对象，而是借助方法来做这些事情。</p>
<p>​		在 Go 语言中，可以给任意自定义类型（包括内置类型，但不包括指针类型）添加相应的方法。</p>
<p>⽅法总是绑定对象实例，并隐式将实例作为第⼀实参 (receiver)，方法的语法如下：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(receiver ReceiverType)</span></span> funcName(parameters) (results)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>参数 receiver 可任意命名。如⽅法中未曾使⽤，可省略参数名。</li>
<li>参数 receiver 类型可以是 T 或 *T。基类型 T 不能是接⼝或指针。</li>
<li>不支持重载方法，也就是说，不能定义名字相同但是不同参数的方法。</li>
</ul>
<h4 id="为类型添加方法"><a href="#为类型添加方法" class="headerlink" title="为类型添加方法"></a>为类型添加方法</h4><h5 id="基础类型作为接收者"><a href="#基础类型作为接收者" class="headerlink" title="基础类型作为接收者"></a>基础类型作为接收者</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="type">int</span> <span class="comment">//自定义类型，给int改名为MyInt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在函数定义时，在其名字之前放上一个变量，即是一个方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a MyInt)</span></span> Add(b MyInt) MyInt &#123; <span class="comment">//面向对象</span></span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//传统方式的定义</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b MyInt)</span></span> MyInt &#123; <span class="comment">//面向过程</span></span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a MyInt = <span class="number">1</span></span><br><span class="line">	<span class="keyword">var</span> b MyInt = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//调用func (a MyInt) Add(b MyInt)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a.Add(b)=&quot;</span>, a.Add(b)) <span class="comment">//a.Add(b)=2</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//调用func Add(a, b MyInt)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Add(a,b)=&quot;</span>, Add(a, b)) <span class="comment">//Add(a,b)=2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>通过上面的例子可以看出，面向对象只是换了一种语法形式来表达。方法是函数的语法糖，因为 receiver 其实就是方法所接收的第 1 个参数。</p>
<p><strong>注意：虽然方法的名字一模一样，但是如果接收者不一样，那么方法就不一样。</strong></p>
<h5 id="结构体作为接收者"><a href="#结构体作为接收者" class="headerlink" title="结构体作为接收者"></a>结构体作为接收者</h5><p>方法里面可以访问接收者的字段，调用方法通过点( <strong>.</strong> )访问，就像 struct 里面访问字段一样：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> PrintInfo() &#123; <span class="comment">//给Person添加方法</span></span><br><span class="line">	fmt.Println(p.name, p.sex, p.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125; <span class="comment">//初始化</span></span><br><span class="line">	p.PrintInfo()                <span class="comment">//调用func (p Person) PrintInfo()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h5 id="值语义和引用语义"><a href="#值语义和引用语义" class="headerlink" title="值语义和引用语义"></a>值语义和引用语义</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> SetInfoPointer() &#123; <span class="comment">//指针作为接收者，引用语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	(*p).name = <span class="string">&quot;Lily&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;f&#x27;</span></span><br><span class="line">	p.age = <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> SetInfoValue() &#123; <span class="comment">//值作为接收者，值语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	p.name = <span class="string">&quot;Lily&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;f&#x27;</span></span><br><span class="line">	p.age = <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//指针作为接收者，引用语义</span></span><br><span class="line">	p1 := Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125; <span class="comment">//初始化</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;函数调用前=&quot;</span>, p1)     <span class="comment">//函数调用前=</span></span><br><span class="line">	(&amp;p1).SetInfoPointer()</span><br><span class="line">	fmt.Println(<span class="string">&quot;函数调用后=&quot;</span>, p1) <span class="comment">//函数调用后=</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;---------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	p2 := Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125; <span class="comment">//初始化</span></span><br><span class="line">	<span class="comment">//值作为接收者，值语义</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;函数调用前=&quot;</span>, p2) <span class="comment">//函数调用前=</span></span><br><span class="line">	p2.SetInfoValue()</span><br><span class="line">	fmt.Println(<span class="string">&quot;函数调用后=&quot;</span>, p2) <span class="comment">//函数调用后=</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	函数调用前= &#123;mike 109 18&#125;</span></span><br><span class="line"><span class="comment">	函数调用后= &#123;Lily 102 22&#125;</span></span><br><span class="line"><span class="comment">	---------------</span></span><br><span class="line"><span class="comment">	函数调用前= &#123;mike 109 18&#125;</span></span><br><span class="line"><span class="comment">	函数调用后= &#123;mike 109 18&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="方法集"><a href="#方法集" class="headerlink" title="方法集"></a>方法集</h4><p>​		类型的方法集是指可以被该类型的值调用的所有方法的集合。</p>
<p>​		用实例实例 value 和 pointer 调用方法（含匿名字段）不受⽅法集约束，编译器编总是查找全部方法，并自动转换 receiver 实参。</p>
<h5 id="类型-T-方法集"><a href="#类型-T-方法集" class="headerlink" title="类型*T 方法集"></a>类型*T 方法集</h5><p>​		一个指向自定义类型的值的指针，它的方法集由该类型定义的所有方法组成，无论这些方法接受的是一个值还是一个指针。</p>
<p>​		如果在指针上调用一个接受值的方法，Go 语言会聪明地将该指针解引用，并将指针所指的底层值作为方法的接收者。</p>
<p>类型 *T ⽅法集包含全部 receiver T + *T ⽅法：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> SetInfoPointer() &#123; <span class="comment">//指针作为接收者，引用语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	(*p).name = <span class="string">&quot;Lily&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;f&#x27;</span></span><br><span class="line">	p.age = <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> SetInfoValue() &#123; <span class="comment">//值作为接收者，值语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	p.name = <span class="string">&quot;xxx&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;m&#x27;</span></span><br><span class="line">	p.age = <span class="number">33</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p *Person = &amp;Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	p.SetInfoPointer()</span><br><span class="line">	p.SetInfoValue()</span><br><span class="line">	(*p).SetInfoValue()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h5 id="类型T-方法集"><a href="#类型T-方法集" class="headerlink" title="类型T 方法集"></a>类型T 方法集</h5><p>​		一个自定义类型值的方法集则由为该类型定义的接收者类型为值类型的方法组成，但是不包含那些接收者类型为指针的方法。</p>
<p>​		但这种限制通常并不像这里所说的那样，因为如果我们只有一个值，仍然可以调用一个接收者为指针类型的方法，这可以借助于 Go 语言传值的地址能力实现。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> SetInfoPointer() &#123; <span class="comment">//指针作为接收者，引用语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	(*p).name = <span class="string">&quot;Lily&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;f&#x27;</span></span><br><span class="line">	p.age = <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> SetInfoValue() &#123; <span class="comment">//值作为接收者，值语义</span></span><br><span class="line">	<span class="comment">//给成员赋值</span></span><br><span class="line">	p.name = <span class="string">&quot;xxx&quot;</span></span><br><span class="line">	p.sex = <span class="string">&#x27;m&#x27;</span></span><br><span class="line">	p.age = <span class="number">33</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p Person = Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	(&amp;p).SetInfoPointer()</span><br><span class="line">	p.SetInfoPointer()</span><br><span class="line">	</span><br><span class="line">	p.SetInfoValue()</span><br><span class="line">	(&amp;p).SetInfoValue()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>还是看是什么语义，引用语义还是会使主函数的值变化</p>
<h4 id="匿名字段"><a href="#匿名字段" class="headerlink" title="匿名字段"></a>匿名字段</h4><h5 id="方法的继承"><a href="#方法的继承" class="headerlink" title="方法的继承"></a>方法的继承</h5><p>如果匿名字段实现了一个方法，那么包含这个匿名字段的 struct 也能调用该方法</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Person定义了方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> PrintInfo() &#123; <span class="comment">//给Person添加方法</span></span><br><span class="line">	fmt.Println(p.name, p.sex, p.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person  <span class="comment">//匿名字段，那么Student包含了Person的所有字段</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	p.PrintInfo()</span><br><span class="line">	s := Student&#123;Person&#123;<span class="string">&quot;Lily&quot;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">20</span>&#125;, <span class="number">2</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	s.PrintInfo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h5 id="方法的重写"><a href="#方法的重写" class="headerlink" title="方法的重写"></a>方法的重写</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">byte</span></span><br><span class="line">	age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Person定义了方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span></span> PrintInfo() &#123; <span class="comment">//给Person添加方法</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Person:&quot;</span>, p.name, p.sex, p.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person  <span class="comment">//匿名字段，那么Student包含了Person的所有字段</span></span><br><span class="line">	id      <span class="type">int</span></span><br><span class="line">	address <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Student定义了方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Student)</span></span> PrintInfo() &#123; <span class="comment">//给Person添加方法</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Student:&quot;</span>, s.name, s.sex, s.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;<span class="string">&quot;mike&quot;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	p.PrintInfo()</span><br><span class="line">	s := Student&#123;Person&#123;<span class="string">&quot;Lily&quot;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">20</span>&#125;, <span class="number">2</span>, <span class="string">&quot;shanghai&quot;</span>&#125;</span><br><span class="line">	s.PrintInfo()</span><br><span class="line">	s.Person.PrintInfo()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Person: mike 109 18</span></span><br><span class="line">	<span class="comment">//Student: Lily 102 20</span></span><br><span class="line">	<span class="comment">//Person: Lily 102 20 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h4><p>​		类似于我们可以对函数进行赋值和传递一样，方法也可以进行赋值和传递。</p>
<p>​		根据调用者不同，方法分为两种表现形式：方法值和方法表达式。两者都可像普通函数那样赋值和传参，区别在于方法值绑定实例，⽽方法表达式则须显式传参。</p>
<h5 id="方法值"><a href="#方法值" class="headerlink" title="方法值"></a>方法值</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221203817345.png"
                      alt="image-20221221203817345"
                ></p>
<h5 id="方法表达式"><a href="#方法表达式" class="headerlink" title="方法表达式"></a>方法表达式</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221203820308.png"
                      alt="image-20221221203820308"
                ></p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><h4 id="概述-5"><a href="#概述-5" class="headerlink" title="概述"></a>概述</h4><p>​		在Go 语言中，接口(interface)是一个自定义类型，接口类型具体描述了一系列方法的集合。</p>
<p>​		接口类型是一种抽象的类型，它不会暴露出它所代表的对象的内部值的结构和这个对象支持的基础操作的集合，它们只会展示出它们自己的方法。因此接口类型不能将其实例化。</p>
<p>​		Go 通过接口实现了鸭子类型(duck-typing)：“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子”。我们并不关心对象是什么类型，到底是不是鸭子，只关心行为。</p>
<h4 id="接口的使用"><a href="#接口的使用" class="headerlink" title="接口的使用"></a>接口的使用</h4><h5 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221210856274.png"
                      alt="image-20221221210856274"
                ></p>
<h5 id="接口实现"><a href="#接口实现" class="headerlink" title="接口实现"></a>接口实现</h5><p>​		接口是用来定义行为的类型。这些被定义的行为不由接口直接实现，而是通过方法由用户定义的类型实现，一个实现了这些方法的具体类型是这个接口类型的实例。</p>
<p>​		如果用户定义的类型实现了某个接口类型声明的一组方法，那么这个用户定义的类型的值就可以赋给这个接口类型的值。这个赋值会把用户定义的类型的值存入接口类型的值。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Humaner <span class="keyword">interface</span> &#123;</span><br><span class="line">	SayHi()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123; <span class="comment">//学生</span></span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	score <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Student)</span></span> SayHi() &#123; <span class="comment">// Student实现SayHi()方法</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Stduent[%s,%f] say hi!!\n&quot;</span>, s.name, s.score)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Teacher <span class="keyword">struct</span> &#123; <span class="comment">//老师</span></span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	group <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *Teacher)</span></span> SayHi() &#123; <span class="comment">// Teacher实现SayHi()方法</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Teacher[%s,%s] say hi!!\n&quot;</span>, t.name, t.group)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Mystr <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(str Mystr)</span></span> SayHi() &#123; <span class="comment">//Mystr实现SayHi()方法</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Mystr[%s] say hi!!\n&quot;</span>, str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WhoSayHi</span><span class="params">(i Humaner)</span></span> &#123; <span class="comment">//普通函数，参数为Humaner类型的变量i</span></span><br><span class="line">	i.SayHi()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := &amp;Student&#123;<span class="string">&quot;mike&quot;</span>, <span class="number">88.88</span>&#125;</span><br><span class="line">	t := &amp;Teacher&#123;<span class="string">&quot;Lily&quot;</span>, <span class="string">&quot;GO语言&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> temp Mystr = <span class="string">&quot;测试&quot;</span></span><br><span class="line"></span><br><span class="line">	s.SayHi()</span><br><span class="line">	t.SayHi()</span><br><span class="line">	temp.SayHi()</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		Stduent[mike,88.880000] say hi!!</span></span><br><span class="line"><span class="comment">		Teacher[Lily,GO语言] say hi!!</span></span><br><span class="line"><span class="comment">		Mystr[测试] say hi!!</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//多态，调用同一接口，不同表现</span></span><br><span class="line">	WhoSayHi(s)</span><br><span class="line">	WhoSayHi(t)</span><br><span class="line">	WhoSayHi(temp)</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		Stduent[mike,88.880000] say hi!!</span></span><br><span class="line"><span class="comment">		Teacher[Lily,GO语言] say hi!!</span></span><br><span class="line"><span class="comment">		Mystr[测试] say hi!!</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	x := <span class="built_in">make</span>([]Humaner, <span class="number">3</span>)</span><br><span class="line">	<span class="comment">//这三个都是不同类型的元素，但是他们实现了interface同一个接口</span></span><br><span class="line">	x[<span class="number">0</span>], x[<span class="number">1</span>], x[<span class="number">2</span>] = s, t, temp</span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> x &#123;</span><br><span class="line">		value.SayHi()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		Stduent[mike,88.880000] say hi!!</span></span><br><span class="line"><span class="comment">		Teacher[Lily,GO语言] say hi!!</span></span><br><span class="line"><span class="comment">		Mystr[测试] say hi!!</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>​		通过上面的代码，你会发现接口就是一组抽象方法的集合，它必须由其他非接口类型实现，而不能自我实现。</p>
<h5 id="接口组合"><a href="#接口组合" class="headerlink" title="接口组合"></a>接口组合</h5><p>​		接口嵌入：如果一个 interface1 作为 interface2 的一个嵌入字段，那么 interface2 隐式的包含了 interface1里面的方法。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Humaner <span class="keyword">interface</span> &#123;</span><br><span class="line">	SayHi()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Personer <span class="keyword">interface</span> &#123;</span><br><span class="line">	Humaner <span class="comment">//这里想写SayHi()一样</span></span><br><span class="line">	Sing(lyrics <span class="type">string</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123; <span class="comment">//学生</span></span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	score <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Student)</span></span> SayHi() &#123; <span class="comment">// Student实现SayHi()方法</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Stduent[%s,%f] say hi!!\n&quot;</span>, s.name, s.score)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Student)</span></span> Sing(lyrics <span class="type">string</span>) &#123; <span class="comment">// Student实现Sing()方法</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Stduent sing[%s]!!\n&quot;</span>, lyrics)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := &amp;Student&#123;<span class="string">&quot;mike&quot;</span>, <span class="number">88.88</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> i2 Personer</span><br><span class="line">	i2 = s</span><br><span class="line">	i2.SayHi()</span><br><span class="line">	i2.Sing(<span class="string">&quot;小帅哥&quot;</span>)</span><br><span class="line">	<span class="comment">//Stduent[mike,88.880000] say hi!!</span></span><br><span class="line">	<span class="comment">//Stduent sing[小帅哥]!!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>接口转化：超级接口对象可转换为子集接口，反之出错：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221230709600.png"
                      alt="image-20221221230709600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221230715889.png"
                      alt="image-20221221230715889"
                ></p>
<p>空接口</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221230846809.png"
                      alt="image-20221221230846809"
                ></p>
<h5 id="类型查询"><a href="#类型查询" class="headerlink" title="类型查询"></a>类型查询</h5><p>我们知道 interface 的变量里面可以存储任意类型的数值(该类型实现了 interface)。那么我们怎么反向知道这个变量里面实际保存了的是哪个类型的对象呢？目前常用的有两种方法：</p>
<ul>
<li>comma-ok 断言</li>
<li>switch 测试</li>
</ul>
<p>comma-ok 断言： </p>
<p>​	Go 语言里面有一个语法，可以直接判断是否是该类型的变量： value, ok &#x3D; element.(T)，这里 value 就是变量的值，ok 是一个 bool 类型，element 是 interface 变量，T 是断言的类型。如果 element 里面确实存储了 T 类型的数值，那么 ok 返回 true，否则返回 false。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221234430828.png"
                      alt="image-20221221234430828"
                ></p>
<p>switch 测试:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221221234512226.png"
                      alt="image-20221221234512226"
                ></p>
<h1 id="9-异常处理"><a href="#9-异常处理" class="headerlink" title="9.异常处理"></a>9.异常处理</h1><h3 id="error接口"><a href="#error接口" class="headerlink" title="error接口"></a>error接口</h3><p>Go 语言引入了一个关于错误处理的标准模式，即 error 接口，它是 Go 语言内建的接口类型，该接口的定义如下：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="type">error</span> <span class="keyword">interface</span>&#123;</span><br><span class="line">	Error() <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>Go 语言的标准库代码包 errors 为用户提供如下方法：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> errors</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> errorString <span class="keyword">struct</span> &#123;</span><br><span class="line">	text <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(text <span class="type">string</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;errorString&#123;text&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *errorString)</span></span> Error() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e.text</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>另一个可以生成 error 类型值的方法是调用 fmt 包中的 Errorf 函数：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fmt</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;errors&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Errorf</span><span class="params">(format <span class="type">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> errors.New(Sprintf(format, args...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>示例代码：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> err1 <span class="type">error</span>=errors.New(<span class="string">&quot;a normal err1&quot;</span>)</span><br><span class="line">	fmt.Println(err1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> err2 <span class="type">error</span>=fmt.Errorf(<span class="string">&quot;%s&quot;</span>,<span class="string">&quot;a normal err2&quot;</span>)</span><br><span class="line">	fmt.Println(err2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>函数通常在最后的返回值中返回错误信息：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Divide</span><span class="params">(a,b <span class="type">float64</span>)</span></span> (result <span class="type">float64</span>,err <span class="type">error</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span> b==<span class="number">0</span>&#123;</span><br><span class="line">		result=<span class="number">0.0</span></span><br><span class="line">		err=errors.New(<span class="string">&quot;runtime error:divide by zero&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	result =a/b</span><br><span class="line">	err=<span class="literal">nil</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	r ,err:=Divide(<span class="number">10.0</span>,<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err) <span class="comment">//错误处理 &quot;runtime error:divide by zero&quot;</span></span><br><span class="line">	&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">		fmt.Println(r) <span class="comment">//使用返回值</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="panic"><a href="#panic" class="headerlink" title="panic"></a>panic</h3><p>​		在通常情况下，向程序使用方报告错误状态的方式可以是返回一个额外的 error 类型值。</p>
<p>​		但是，当遇到不可恢复的错误状态的时候，如数组访问越界、空指针引用等，这些运行时错误会引起 painc 异常。这时，上述错误处理方式显然就不适合了。反过来讲，在一般情况下，我们不应通过调用 panic 函数来报告普通的错误，而应该只把它作为报告致命错误的一种方式。当某些不应该发生的场景发生时，我们就应该调用 panic。</p>
<p>​		一般而言，当 panic 异常发生时，程序会中断运行，并立即执行在该 goroutine（可以先理解成线程，在中被延迟的函数（defer 机制）。随后，程序崩溃并输出日志信息。日志信息包括 panic value 和函数调用的堆栈跟踪信息。</p>
<p>​		不是所有的 panic 异常都来自运行时，直接调用内置的 panic 函数也会引发 panic 异常；panic函数接受任何值作为参数。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panic</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span></span><br></pre></td></tr></table></figure></div>



<p>调用 panic 函数引发的 panic 异常：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222104213660.png"
                      alt="image-20221222104213660"
                ></p>
<p>内置的 panic 函数引发的 panic 异常:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222104348853.png"
                      alt="image-20221222104348853"
                ></p>
<h3 id="recover"><a href="#recover" class="headerlink" title="recover"></a>recover</h3><p>​		运行时 panic 异常一旦被引发就会导致程序崩溃。这当然不是我们愿意看到的，因为谁也不能保证程序不会发生任何运行时错误。</p>
<p>​		不过，Go 语言为我们提供了专用于“拦截”运行时 panic 的内建函数——recover。它可以是当前的程序从运行时 panic 的状态中恢复并重新获得流程控制权。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recover</span><span class="params">()</span></span> <span class="keyword">interface</span>&#123;&#125;</span><br></pre></td></tr></table></figure></div>

<p>注意：recover 只有在 defer 调用的函数中有效。</p>
<p>​		如果调用了内置函数 recover，并且定义该 defer 语句的函数发生了 panic 异常，recover 会使程序从 panic 中恢复，并返回 panic value。导致 panic 异常的函数不会继续运行，但能正常返回。在未发生 panic 时调用 recover，recover 会返回 nil。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestA</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;func TestA()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestB</span><span class="params">()</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; <span class="comment">//在发生异常时，设置恢复</span></span><br><span class="line">		<span class="keyword">if</span> x := <span class="built_in">recover</span>(); x != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="comment">//panic value 被附加到错误信息中；</span></span><br><span class="line">			<span class="comment">//并用 err 变量接收错误信息，返回给调用者。</span></span><br><span class="line">			err = fmt.Errorf(<span class="string">&quot;internal error: %v&quot;</span>, x)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;func TestB(): panic&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestC</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;func TestC()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	TestA()</span><br><span class="line">	err := TestB()</span><br><span class="line">	fmt.Println(err)</span><br><span class="line">	TestC()</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	   运行结果：</span></span><br><span class="line"><span class="comment">	   func TestA()</span></span><br><span class="line"><span class="comment">	   internal error: func TestB(): panic</span></span><br><span class="line"><span class="comment">	   func TestC()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>延迟调用中引发的错误，可被后续延迟调用捕获，但仅最后⼀个错误可被捕获</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222105655519.png"
                      alt="image-20221222105655519"
                ></p>
<h1 id="10-文本文件处理"><a href="#10-文本文件处理" class="headerlink" title="10.文本文件处理"></a>10.文本文件处理</h1><h3 id="字符串处理"><a href="#字符串处理" class="headerlink" title="字符串处理"></a>字符串处理</h3><p>​		字符串在开发中经常用到，包括用户的输入，数据库读取的数据等，我们经常需要对字符串进行分割、连接、转换等操作，我们可以通过 Go 标准库中的 strings 和 strconv 两个包中的函数进行相应的操作。</p>
<h4 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h4><p>下面这些函数来自于 strings 包，这里介绍一些我平常经常用到的函数，更详细的请参考官方的文档。</p>
<h5 id="Contains"><a href="#Contains" class="headerlink" title="Contains"></a>Contains</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">func Contains(s, substr string) bool</span></span><br><span class="line"><span class="comment">功能：字符串 s 中是否包含 substr，返回 bool 值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	fmt.Println(strings.Contains(<span class="string">&quot;seafood&quot;</span>,<span class="string">&quot;foo&quot;</span>))</span><br><span class="line">	fmt.Println(strings.Contains(<span class="string">&quot;seafood&quot;</span>,<span class="string">&quot;bar&quot;</span>))</span><br><span class="line">	fmt.Println(strings.Contains(<span class="string">&quot;seafood&quot;</span>,<span class="string">&quot;&quot;</span>))</span><br><span class="line">	fmt.Println(strings.Contains(<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>))</span><br><span class="line">	<span class="comment">//true</span></span><br><span class="line">	<span class="comment">//false</span></span><br><span class="line">	<span class="comment">//true</span></span><br><span class="line">	<span class="comment">//true </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h5 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//func Join(a []string, sep string) string</span></span><br><span class="line"><span class="comment">//功能：字符串链接，把 slice a 通过 sep 链接起来</span></span><br><span class="line"></span><br><span class="line">s:=[]<span class="type">string</span>&#123;<span class="string">&quot;foo&quot;</span>,<span class="string">&quot;bar&quot;</span>,<span class="string">&quot;baz&quot;</span>&#125;</span><br><span class="line">fmt.Println(strings.Join(s,<span class="string">&quot;,&quot;</span>))</span><br><span class="line"><span class="comment">//foo,bar,baz</span></span><br></pre></td></tr></table></figure></div>



<h5 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//func Index(s, sep string) int</span></span><br><span class="line"><span class="comment">//功能：在字符串 s 中查找 sep 所在的位置，返回位置值，找不到返回-1</span></span><br><span class="line">fmt.Println(strings.Index(<span class="string">&quot;chicken&quot;</span>,<span class="string">&quot;ken&quot;</span>))</span><br><span class="line">fmt.Println(strings.Index(<span class="string">&quot;chicken&quot;</span>,<span class="string">&quot;dmr&quot;</span>))</span><br><span class="line"><span class="comment">//4</span></span><br><span class="line"><span class="comment">//-1</span></span><br></pre></td></tr></table></figure></div>



<h5 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//func Repeat(s string, count int) string</span></span><br><span class="line"><span class="comment">//功能：重复 s 字符串 count 次，最后返回重复的字符串</span></span><br><span class="line">fmt.Println(strings.Repeat(<span class="string">&quot;na&quot;</span>,<span class="number">2</span>))</span><br><span class="line"><span class="comment">//nana</span></span><br></pre></td></tr></table></figure></div>



<h5 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//func Replace(s, old, new string, n int) string</span></span><br><span class="line"><span class="comment">//功能：在 s 字符串中，把 old 字符串替换为 new 字符串，n 表示替换的次数，小于 0 表示全部替换</span></span><br><span class="line">	fmt.Println(strings.Replace(<span class="string">&quot;oink oink oink&quot;</span>,<span class="string">&quot;k&quot;</span>,<span class="string">&quot;ky&quot;</span>,<span class="number">2</span>))</span><br><span class="line">	fmt.Println(strings.Replace(<span class="string">&quot;oink oink oink&quot;</span>,<span class="string">&quot;oink&quot;</span>,<span class="string">&quot;moo&quot;</span>,<span class="number">-1</span>))</span><br><span class="line">	<span class="comment">//oinky oinky oink</span></span><br><span class="line">	<span class="comment">//moo moo moo     </span></span><br></pre></td></tr></table></figure></div>



<h5 id="splict"><a href="#splict" class="headerlink" title="splict"></a>splict</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222115337018.png"
                      alt="image-20221222115337018"
                ></p>
<h5 id="Trim"><a href="#Trim" class="headerlink" title="Trim"></a>Trim</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222115409755.png"
                      alt="image-20221222115409755"
                ></p>
<h5 id="Fields"><a href="#Fields" class="headerlink" title="Fields"></a>Fields</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222115424666.png"
                      alt="image-20221222115424666"
                ></p>
<h4 id="字符串转化"><a href="#字符串转化" class="headerlink" title="字符串转化"></a>字符串转化</h4><h5 id="append"><a href="#append" class="headerlink" title="append"></a>append</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222120446823.png"
                      alt="image-20221222120446823"
                ></p>
<h5 id="format"><a href="#format" class="headerlink" title="format"></a>format</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222120501046.png"
                      alt="image-20221222120501046"
                ></p>
<h5 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222120524867.png"
                      alt="image-20221222120524867"
                ></p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p><a class="link"   target="_blank" rel="noopener" href="https://github.com/google/re2" >https://github.com/google/re2<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://studygolang.com/articles/28796" >https://studygolang.com/articles/28796<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="JSON处理"><a href="#JSON处理" class="headerlink" title="JSON处理"></a>JSON处理</h3><p>​		JSON （JavaScript Object Notation）是一种比 XML 更轻量级的数据交换格式，在易于人们阅读和编写的同时，也易于程序解析和生成。尽管 JSON 是 JavaScript 的一个子集，但 JSON采用完全独立于编程语言的文本格式，且表现为键&#x2F;值对集合的文本描述形式（类似一些编程语言中的字典结构），这使它成为较为理想的、跨平台、跨语言的数据交换语言。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222130803675.png"
                      alt="image-20221222130803675"
                ></p>
<p>​		开发者可以用 JSON 传输简单的字符串、数字、布尔值，也可以传输一个数组，或者一个更复杂的复合结构。在 Web 开发领域中， JSON 被广泛应用于 Web 服务端程序和客户端之间的数据通信。</p>
<p>​		Go 语言内建对 JSON 的支持。使用 Go 语言内置的 encoding&#x2F;json 标准库，开发者可以轻松使用 Go 程序生成和解析 JSON 格式的数据。</p>
<p>JSON 官方网站：<a class="link"   target="_blank" rel="noopener" href="http://www.json.org/" >http://www.json.org/<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>在线格式化：<a class="link"   target="_blank" rel="noopener" href="http://www.json.cn/" >http://www.json.cn/<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h4 id="编码json"><a href="#编码json" class="headerlink" title="编码json"></a>编码json</h4><h5 id="通过结构体生成json"><a href="#通过结构体生成json" class="headerlink" title="通过结构体生成json"></a>通过结构体生成json</h5><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222133407516.png"
                      alt="image-20221222133407516"
                ></p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IT <span class="keyword">struct</span>&#123;</span><br><span class="line">	Company <span class="type">string</span></span><br><span class="line">	Subjects []<span class="type">string</span></span><br><span class="line">	IsOk <span class="type">bool</span></span><br><span class="line">	Price <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	t1:=IT&#123;<span class="string">&quot;itcast&quot;</span>,[]<span class="type">string</span>&#123;<span class="string">&quot;GO&quot;</span>,<span class="string">&quot;C++&quot;</span>,<span class="string">&quot;Python&quot;</span>,<span class="string">&quot;Test&quot;</span>&#125;,<span class="literal">true</span>,<span class="number">666.666</span>&#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	生成一段 JSON 格式的文本</span></span><br><span class="line"><span class="comment">	如果编码成功， err 将赋于零值 nil，变量 b 将会是一个进行 JSON 格式化之后的</span></span><br><span class="line"><span class="comment">	[]byte 类型</span></span><br><span class="line"><span class="comment">	b, err := json.Marshal(t1)</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">	&#123;&quot;Company&quot;:&quot;itcast&quot;,&quot;Subjects&quot;:[&quot;Go&quot;,&quot;C++&quot;,&quot;Python&quot;,&quot;Test&quot;],&quot;IsOk&quot;:tr</span></span><br><span class="line"><span class="comment">	ue,&quot;Price&quot;:666.666&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	 b,err:=json.MarshalIndent(t1,<span class="string">&quot;&quot;</span>,<span class="string">&quot;    &quot;</span>)</span><br><span class="line">	 <span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		 fmt.Println(<span class="string">&quot;json err:&quot;</span>,err)</span><br><span class="line">	 &#125;</span><br><span class="line">	 fmt.Println(<span class="type">string</span>(b))</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/*</span></span><br><span class="line"><span class="comment">	 &#123;</span></span><br><span class="line"><span class="comment">	     &quot;Company&quot;: &quot;itcast&quot;,</span></span><br><span class="line"><span class="comment">	     &quot;Subjects&quot;: [</span></span><br><span class="line"><span class="comment">	         &quot;GO&quot;,</span></span><br><span class="line"><span class="comment">	         &quot;C++&quot;,</span></span><br><span class="line"><span class="comment">	         &quot;Python&quot;,</span></span><br><span class="line"><span class="comment">	         &quot;Test&quot;</span></span><br><span class="line"><span class="comment">	     ],</span></span><br><span class="line"><span class="comment">	     &quot;IsOk&quot;: true,</span></span><br><span class="line"><span class="comment">	     &quot;Price&quot;: 666.666</span></span><br><span class="line"><span class="comment">	 &#125;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>我们看到上面的输出字段名的首字母都是大写的，如果你想用小写的首字母怎么办呢？把结构体的字段名改成首字母小写的？JSON 输出的时候必须注意，只有导出的字段(首字母是大写)才会被输出，如果修改字段名，那么就会发现什么都不会输出，所以必须通过 struct tag定义来实现。</p>
<p>针对 JSON 的输出，我们在定义 struct tag 的时候需要注意的几点是：</p>
<ul>
<li>字段的 tag 是”-“，那么这个字段不会输出到 JSON</li>
<li>tag 中带有自定义名称，那么这个自定义名称会出现在 JSON 的字段名中</li>
<li>tag 中如果带有”omitempty”选项，那么如果该字段值为空，就不会输出到 JSON 串中</li>
<li>如果字段类型是 bool, string, int, int64 等，而 tag 中带有”,string”选项，那么这个字段在输出到 JSON 的时候会把该字段对应的值转换成 JSON 字符串</li>
</ul>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IT <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">//Company 不会导出到 JSON 中</span></span><br><span class="line">	Company <span class="type">string</span> <span class="string">`json:&quot;-&quot;`</span></span><br><span class="line">	<span class="comment">// Subjects 的值会进行二次 JSON 编码</span></span><br><span class="line">	Subjects []<span class="type">string</span> <span class="string">`json:&quot;subjects&quot;`</span><span class="number">1</span></span><br><span class="line">	<span class="comment">//转换为字符串，再输出</span></span><br><span class="line">	IsOk <span class="type">bool</span> <span class="string">`json:&quot;,string&quot;`</span></span><br><span class="line">	<span class="comment">// 如果 Price 为空，则不输出到 JSON 串中</span></span><br><span class="line">	Price <span class="type">float64</span> <span class="string">`json:&quot;price,omitempty&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	t1 := IT&#123;Company: <span class="string">&quot;itcast&quot;</span>, Subjects: []<span class="type">string</span>&#123;<span class="string">&quot;Go&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="string">&quot;Python&quot;</span>,<span class="string">&quot;Test&quot;</span>&#125;, IsOk: <span class="literal">true</span>&#125;</span><br><span class="line">	b, err := json.Marshal(t1)</span><br><span class="line">	<span class="comment">//json.MarshalIndent(t1, &quot;&quot;, &quot; &quot;)</span></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json err:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="type">string</span>(b))</span><br><span class="line">	<span class="comment">//输出结果：</span></span><br><span class="line">	<span class="comment">//&#123;&quot;subjects&quot;:[&quot;Go&quot;,&quot;C++&quot;,&quot;Python&quot;,&quot;Test&quot;],&quot;IsOk&quot;:&quot;true&quot;,&quot;price&quot;:0&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h5 id="通过map生成JSON"><a href="#通过map生成JSON" class="headerlink" title="通过map生成JSON"></a>通过map生成JSON</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个保存键值对的映射</span></span><br><span class="line">	t1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	t1[<span class="string">&quot;company&quot;</span>] = <span class="string">&quot;itcast&quot;</span></span><br><span class="line">	t1[<span class="string">&quot;subjects &quot;</span>] = []<span class="type">string</span>&#123;<span class="string">&quot;Go&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="string">&quot;Python&quot;</span>, <span class="string">&quot;Test&quot;</span>&#125;</span><br><span class="line">	t1[<span class="string">&quot;isok&quot;</span>] = <span class="literal">true</span></span><br><span class="line">	t1[<span class="string">&quot;price&quot;</span>] = <span class="number">666.666</span></span><br><span class="line">	b, err := json.Marshal(t1)</span><br><span class="line">	<span class="comment">//json.MarshalIndent(t1, &quot;&quot;, &quot; &quot;)</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json err:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="type">string</span>(b))</span><br><span class="line">	<span class="comment">//输出结果：</span></span><br><span class="line">	<span class="comment">//&#123;&quot;company&quot;:&quot;itcast&quot;,&quot;isok&quot;:true,&quot;price&quot;:666.666,&quot;subjects</span></span><br><span class="line">	<span class="comment">//	&quot;:[&quot;Go&quot;,&quot;C++&quot;,&quot;Python&quot;,&quot;Test&quot;]&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="解码Json"><a href="#解码Json" class="headerlink" title="解码Json"></a>解码Json</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222142929599.png"
                      alt="image-20221222142929599"
                ></p>
<h5 id="解析到结构体"><a href="#解析到结构体" class="headerlink" title="解析到结构体"></a>解析到结构体</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IT <span class="keyword">struct</span> &#123;</span><br><span class="line">	Company <span class="type">string</span> <span class="string">`json:&quot;company&quot;`</span></span><br><span class="line">	Subjects []<span class="type">string</span> <span class="string">`json:&quot;subjects&quot;`</span></span><br><span class="line">	IsOk <span class="type">bool</span> <span class="string">`json:&quot;isok&quot;`</span></span><br><span class="line">	Price <span class="type">float64</span> <span class="string">`json:&quot;price&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b := []<span class="type">byte</span>(<span class="string">`&#123;</span></span><br><span class="line"><span class="string"> &quot;company&quot;: &quot;itcast&quot;,</span></span><br><span class="line"><span class="string"> &quot;subjects&quot;: [</span></span><br><span class="line"><span class="string"> &quot;Go&quot;,</span></span><br><span class="line"><span class="string"> &quot;C++&quot;,</span></span><br><span class="line"><span class="string"> &quot;Python&quot;,</span></span><br><span class="line"><span class="string"> &quot;Test&quot;</span></span><br><span class="line"><span class="string"> ],</span></span><br><span class="line"><span class="string"> &quot;isok&quot;: true,</span></span><br><span class="line"><span class="string"> &quot;price&quot;: 666.666</span></span><br><span class="line"><span class="string">&#125;`</span>)</span><br><span class="line">	<span class="keyword">var</span> t IT</span><br><span class="line">	err := json.Unmarshal(b, &amp;t)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json err:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">	<span class="comment">//运行结果：&#123;itcast [Go C++ Python Test] true 666.666&#125;</span></span><br><span class="line">	<span class="comment">//只想要 Subjects 字段</span></span><br><span class="line">	<span class="keyword">type</span> IT2 <span class="keyword">struct</span> &#123;</span><br><span class="line">		Subjects []<span class="type">string</span> <span class="string">`json:&quot;subjects&quot;`</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> t2 IT2</span><br><span class="line">	err = json.Unmarshal(b, &amp;t2)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json err:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t2)</span><br><span class="line">	<span class="comment">//运行结果：&#123;[Go C++ Python Test]&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h5 id="解析到interface"><a href="#解析到interface" class="headerlink" title="解析到interface"></a>解析到interface</h5><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IT <span class="keyword">struct</span> &#123;</span><br><span class="line">	Company <span class="type">string</span> <span class="string">`json:&quot;company&quot;`</span></span><br><span class="line">	Subjects []<span class="type">string</span> <span class="string">`json:&quot;subjects&quot;`</span></span><br><span class="line">	Isok <span class="type">bool</span> <span class="string">`json:&quot;isok&quot;`</span></span><br><span class="line">	Price <span class="type">float64</span> <span class="string">`json:&quot;price&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b:=[]<span class="type">byte</span>(<span class="string">`&#123;</span></span><br><span class="line"><span class="string">		&quot;company&quot;: &quot;itcast&quot;,</span></span><br><span class="line"><span class="string">		&quot;subjects&quot;: [</span></span><br><span class="line"><span class="string">			&quot;GO&quot;,</span></span><br><span class="line"><span class="string">			&quot;C++&quot;,</span></span><br><span class="line"><span class="string">			&quot;Python&quot;,</span></span><br><span class="line"><span class="string">			&quot;Test&quot;</span></span><br><span class="line"><span class="string">		],</span></span><br><span class="line"><span class="string">		&quot;isok&quot;: true,</span></span><br><span class="line"><span class="string">		&quot;price&quot;: 666.666</span></span><br><span class="line"><span class="string">	&#125;`</span>)</span><br><span class="line"></span><br><span class="line"> 	<span class="keyword">var</span> t <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	err:=json.Unmarshal(b,&amp;t)</span><br><span class="line">	<span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json err:&quot;</span>,err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">	<span class="comment">//使用断言判断类型 element.(type)</span></span><br><span class="line">	m:=t.(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> k,v :=<span class="keyword">range</span> m&#123;</span><br><span class="line">		<span class="keyword">switch</span> vv:=v.(<span class="keyword">type</span>) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="type">string</span>:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is string&quot;</span>, vv)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">int</span>:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is int&quot;</span>, vv)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">float64</span>:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is float64&quot;</span>, vv)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">bool</span>:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is bool&quot;</span>, vv)</span><br><span class="line">		<span class="keyword">case</span> []<span class="keyword">interface</span>&#123;&#125;:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is an array:&quot;</span>)</span><br><span class="line">			<span class="keyword">for</span> i, u := <span class="keyword">range</span> vv &#123;</span><br><span class="line">				fmt.Println(i, u)</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(k, <span class="string">&quot;is of a type I don&#x27;t know how to handle&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222150459905.png"
                      alt="image-20221222150459905"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222150509424.png"
                      alt="image-20221222150509424"
                ></p>
<h4 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fout,err:=os.Create(<span class="string">&quot;./xxx.txt&quot;</span>) <span class="comment">//新建文件</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fout.Close() <span class="comment">//main函数结束前，关闭文件</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++&#123;</span><br><span class="line">		outstr:=fmt.Sprintf(<span class="string">&quot;%s:%d\n&quot;</span>,<span class="string">&quot;hello go&quot;</span>,i)</span><br><span class="line">		fout.WriteString(outstr) 		<span class="comment">//写入string信息到文件</span></span><br><span class="line">		fout.Write([]<span class="type">byte</span>(<span class="string">&quot;abcd\n&quot;</span>)) 	<span class="comment">//写入byte类型的信息到文件。</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h4 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fin,err:=os.Open(<span class="string">&quot;./xxx.txt&quot;</span>) <span class="comment">//打开文件</span></span><br><span class="line">	<span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fin.Close()</span><br><span class="line">	buf:=<span class="built_in">make</span>([]<span class="type">byte</span>,<span class="number">1024</span>) <span class="comment">//开辟1024个字节的slice作为缓冲</span></span><br><span class="line">	<span class="keyword">for</span>&#123;</span><br><span class="line">		n,_ :=fin.Read(buf) <span class="comment">//读文件</span></span><br><span class="line">		<span class="keyword">if</span> n==<span class="number">0</span>&#123;	<span class="comment">//0表示已经到文件结束</span></span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="type">string</span>(buf)) <span class="comment">//输出读取的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="拷贝文件"><a href="#拷贝文件" class="headerlink" title="拷贝文件"></a>拷贝文件</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222154233047.png"
                      alt="image-20221222154233047"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221222154241644.png"
                      alt="image-20221222154241644"
                ></p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//复制前的文件路径，复制完的文件路径。</span></span><br><span class="line">	srcPath := <span class="string">&quot;zx.txt&quot;</span> </span><br><span class="line">	dstPath := <span class="string">&quot;test.txt&quot;</span></span><br><span class="line">	srcFile, err1 := os.Open(srcPath) <span class="comment">//打开</span></span><br><span class="line">	<span class="keyword">if</span> err1 != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err1)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	dstFile, err2 := os.Create(dstPath)</span><br><span class="line">	<span class="keyword">if</span> err2 != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err2)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err := srcFile.Read(buf)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &amp;&amp; err != io.EOF &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		tmp := buf[:n]</span><br><span class="line">		dstFile.Write(tmp)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	srcFile.Close()</span><br><span class="line">	dstFile.Close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h1 id="11-并发编程"><a href="#11-并发编程" class="headerlink" title="11.并发编程"></a>11.并发编程</h1><h3 id="概述-6"><a href="#概述-6" class="headerlink" title="概述"></a>概述</h3><h4 id="并行和并发"><a href="#并行和并发" class="headerlink" title="并行和并发"></a>并行和并发</h4><p><strong>并行</strong>(parallel)：指在同一时刻，有多条指令在多个处理器上同时执行。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223122000183.png"
                      alt="image-20221223122000183"
                ></p>
<p><strong>并发</strong>（concurrency)：指在同一时刻只能有一条指令执行，但多个进程指令被快速的轮换执行，使得在宏观上具有多个进程同时执行的效果，但在微观上并不是同时执行的，只是把时间分成若干段，使多个进程快速交替的执行。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223122029893.png"
                      alt="image-20221223122029893"
                ></p>
<ul>
<li>并行是两个队列<strong>同时</strong>使用两台咖啡机</li>
<li>并发是两个队列<strong>交替</strong>使用一台咖啡机</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223122054628.png"
                      alt="image-20221223122054628"
                ></p>
<h4 id="go语言并发优势"><a href="#go语言并发优势" class="headerlink" title="go语言并发优势"></a>go语言并发优势</h4><p>​		有人把 Go 比作 21 世纪的 C 语言，第一是因为 Go 语言设计简单，第二，21 世纪最重要的就是并行程序设计，而 Go 从语言层面就支持了并行。同时，并发程序的内存管理有时候是非常复杂的，而 Go 语言提供了自动垃圾回收机制。</p>
<p>​		Go 语言为并发编程而内置的上层 API 基于 CSP(communicating sequential processes, 顺序通信进程)模型。这就意味着显式锁都是可以避免的，因为 Go 语言通过相册安全的通道发送和接受数据以实现同步，这大大地简化了并发程序的编写。</p>
<p>​		一般情况下，一个普通的桌面计算机跑十几二十个线程就有点负载过大了，但是同样这台机</p>
<p>器却可以轻松地让成百上千甚至过万个 goroutine 进行资源竞争。</p>
<h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><h4 id="goroutine是什么"><a href="#goroutine是什么" class="headerlink" title="goroutine是什么"></a>goroutine是什么</h4><p>​		goroutine 是 Go 并行设计的核心。goroutine 说到底其实就是协程，但是它比线程更小，十几个 goroutine 可能体现在底层就是五六个线程，Go 语言内部帮你实现了这些 goroutine 之间的内存共享。执行 goroutine 只需极少的栈内存(大概是 4~5KB)，当然会根据相应的数据伸缩。也正因为如此，可同时运行成千上万个并发任务。goroutine 比 thread 更易用、更高效、更轻便。</p>
<h4 id="创建goroutine"><a href="#创建goroutine" class="headerlink" title="创建goroutine"></a>创建goroutine</h4><p>​		只需在函数调⽤语句前添加 go 关键字，就可创建并发执⾏单元。开发⼈员无需了解任何执⾏细节，调度器会自动将其安排到合适的系统线程上执行。</p>
<p>​		在并发编程里，我们通常想讲一个过程切分成几块，然后让每个 goroutine 各自负责一块工作。当一个程序启动时，其主函数即在一个单独的 goroutine 中运行，我们叫它 main goroutine。新的 goroutine 会用 go 语句来创建。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;new goroutine:i=%d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second) <span class="comment">//延时1s</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建一个goroutine，启动另外一个任务</span></span><br><span class="line">	<span class="keyword">go</span> NewTask()</span><br><span class="line"></span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="comment">//main goroutine 循环打印</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;main goroutine:i=%d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second) <span class="comment">//延时1s</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223124306385.png"
                      alt="image-20221223124306385"
                ></p>
<h4 id="主goroutine先退出"><a href="#主goroutine先退出" class="headerlink" title="主goroutine先退出"></a>主goroutine先退出</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;new goroutine:i=%d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second) <span class="comment">//延时1s</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建一个goroutine，启动另外一个任务</span></span><br><span class="line">	<span class="keyword">go</span> NewTask()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine exit&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>main goroutine退出，其他goroutine全部退出。</p>
<h3 id="runtime包"><a href="#runtime包" class="headerlink" title="runtime包"></a>runtime包</h3><h4 id="Gosched"><a href="#Gosched" class="headerlink" title="Gosched"></a>Gosched</h4><p>​		runtime.Gosched() 用于让出 CPU 时间片，让出当前 goroutine 的执行权限，调度器安排其他等待的任务运行，并在下次某个时候从该位置恢复执行。</p>
<p>​		这就像跑接力赛，A 跑了一会碰到代码 runtime.Gosched() 就把接力棒交给 B 了，A 歇着了，B 继续跑 。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建一个goroutine</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(s <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			fmt.Println(s)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123;</span><br><span class="line">		runtime.Gosched() <span class="comment">//import 	&quot;runtime&quot;</span></span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223130100705.png"
                      alt="image-20221223130100705"
                ></p>
<h4 id="Goexit"><a href="#Goexit" class="headerlink" title="Goexit"></a>Goexit</h4><p>调用 runtime.Goexit() 将立即终止当前 goroutine 执⾏，调度器确保所有已注册 defer 延迟调用被执行。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;a.defer&quot;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;b.defer&quot;</span>)</span><br><span class="line">			runtime.Goexit() <span class="comment">//终止当前goroutine</span></span><br><span class="line">			fmt.Println(<span class="string">&quot;b&quot;</span>)</span><br><span class="line">		&#125;()</span><br><span class="line">		fmt.Println(<span class="string">&quot;a&quot;</span>) <span class="comment">//不会执行</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">//死循环，目的不让主goroutine结束</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223133211856.png"
                      alt="image-20221223133211856"
                ></p>
<h4 id="GOMAXPROCS"><a href="#GOMAXPROCS" class="headerlink" title="GOMAXPROCS"></a>GOMAXPROCS</h4><p>调用 runtime.GOMAXPROCS() 用来设置可以并行计算的 CPU 核数的最大值，并返回之前的值。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223133630391.png"
                      alt="image-20221223133630391"
                ></p>
<p>​		在第一次执行(runtime.GOMAXPROCS(1))时，最多同时只能有一个 goroutine 被执行。所以会打印很多 1。过了一段时间后，GO 调度器会将其置为休眠，并唤醒另一个 goroutine，这时候就开始打印很多 0 了，在打印的时候，goroutine 是被调度到操作系统线程上的。</p>
<p>​		在第二次执行(runtime.GOMAXPROCS(2))时，我们使用了两个 CPU，所以两个 goroutine 可以一起被执行，以同样的频率交替打印 0 和 1。</p>
<h3 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h3><p>​		goroutine 运行在相同的地址空间，因此访问共享内存必须做好同步。goroutine 奉行通过通信来共享内存，而不是共享内存来通信。</p>
<p>​		引⽤类型 channel 是 CSP 模式的具体实现，用于多个 goroutine 通讯。其内部实现了同步，确保并发安全。</p>
<h4 id="channel类型"><a href="#channel类型" class="headerlink" title="channel类型"></a>channel类型</h4><p>​		和 map 类似，channel 也一个对应 make 创建的底层数据结构的引用。</p>
<p>​		当我们复制一个 channel 或用于函数参数传递时，我们只是拷贝了一个 channel 引用，因此调用者何被调用者将引用同一个 channel 对象。和其它的引用类型一样，channel 的零值也是nil。</p>
<p>​		定义一个 channel 时，也需要定义发送到 channel 的值的类型。channel 可以使用内置的 make()函数来创建：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Type) <span class="comment">//等价于 make(chan Type, 0)</span></span><br><span class="line"><span class="built_in">make</span>(<span class="keyword">chan</span> Type, capacity)</span><br></pre></td></tr></table></figure></div>

<p>​		当 capacity&#x3D; 0 时，channel 是无缓冲阻塞读写的，当 capacity&gt; 0 时，channel 有缓冲、是非阻塞的，直到写满 capacity 个元素才阻塞写入。</p>
<p>​		channel 通过操作符&lt;-来接收和发送数据，发送和接收数据语法：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">channel &lt;- value <span class="comment">//发送 value 到 channel</span></span><br><span class="line">&lt;-channel <span class="comment">//接收并将其丢弃</span></span><br><span class="line">x := &lt;-channel <span class="comment">//从 channel 中接收数据，并赋值给 x</span></span><br><span class="line">x, ok := &lt;-channel <span class="comment">//功能同上，同时检查通道是否已关闭或者是否为空</span></span><br></pre></td></tr></table></figure></div>

<p>​		默认情况下，channel 接收和发送数据都是阻塞的，除非另一端已经准备好，这样就使得goroutine 同步变的更加的简单，而不需要显式的 lock。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;子协程结束&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;子协程正在运行...&quot;</span>)</span><br><span class="line">		c &lt;- <span class="number">666</span> <span class="comment">//666发送到c</span></span><br><span class="line">	&#125;()</span><br><span class="line">	num := &lt;-c <span class="comment">//从c中接受数据，并赋值给num</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;num=&quot;</span>, num)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main协程结束&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="无缓冲的channel"><a href="#无缓冲的channel" class="headerlink" title="无缓冲的channel"></a>无缓冲的channel</h4><p>​		无缓冲的通道（unbuffered channel）是指在接收前没有能力保存任何值的通道。</p>
<p>​		这种类型的通道要求发送 goroutine 和接收 goroutine 同时准备好，才能完成发送和接收操作。如果两个 goroutine 没有同时准备好，通道会导致先执行发送或接收操作的 goroutine 阻塞等待。</p>
<p>​		这种对通道进行发送和接收的交互行为本身就是同步的。其中任意一个操作都无法离开另一个操作单独存在。</p>
<p>下图展示两个 goroutine 如何利用无缓冲的通道来共享一个值：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223141533675.png"
                      alt="image-20221223141533675"
                ></p>
<ul>
<li>在第 1 步，两个 goroutine 都到达通道，但哪个都没有开始执行发送或者接收。</li>
<li>在第 2 步，左侧的 goroutine 将它的手伸进了通道，这模拟了向通道发送数据的行为。这时，这个 goroutine 会在通道中被锁住，直到交换完成。</li>
<li>在第 3 步，右侧的 goroutine 将它的手放入通道，这模拟了从通道里接收数据。这个goroutine 一样也会在通道中被锁住，直到交换完成。</li>
<li>在第 4 步和第 5 步，进行交换，并最终，在第 6 步，两个 goroutine 都将它们的手从通道里拿出来，这模拟了被锁住的 goroutine 得到释放。两个 goroutine 现在都可以去做别的事情了。</li>
</ul>
<p>无缓冲的 channel 创建格式：</p>
<p><code>make(chan Type) //等价于 make(chan Type, 0)</code></p>
<p>如果没有指定缓冲区容量，那么该通道就是同步的，因此会阻塞到发送者准备好发送和接收者准备好接收。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">0</span>) <span class="comment">//无缓冲的通道</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//内置函数len返回未被读取的缓冲元素数量，cap返回缓冲区大小</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(c)=%d,cap(c)=%d\n&quot;</span>, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c))</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;子协程结束&quot;</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Printf(<span class="string">&quot;子协程正在运行[%d]:len(c)=%d,cap(c)=%d\n&quot;</span>, i, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">2</span> * time.Second) <span class="comment">//延时2s</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">		num := &lt;-c <span class="comment">//从从中接收数据,并赋值给num</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;num=&quot;</span>, num)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;main协程结束&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="有缓冲的channel"><a href="#有缓冲的channel" class="headerlink" title="有缓冲的channel"></a>有缓冲的channel</h4><p>​		有缓冲的通道（buffered channel）是一种在被接收前能存储一个或者多个值的通道。</p>
<p>​		这种类型的通道并不强制要求 goroutine 之间必须同时完成发送和接收。通道会阻塞发送和接收动作的条件也会不同。只有在通道中没有要接收的值时，接收动作才会阻塞。只有在通道没有可用缓冲区容纳被发送的值时，发送动作才会阻塞。</p>
<p>​		这导致有缓冲的通道和无缓冲的通道之间的一个很大的不同：无缓冲的通道保证进行发送和接收的 goroutine 会在同一时间进行数据交换；有缓冲的通道没有这种保证。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223145828578.png"
                      alt="image-20221223145828578"
                ></p>
<ul>
<li>在第 1 步，右侧的 goroutine 正在从通道接收一个值。</li>
<li>在第 2 步，右侧的这个 goroutine 独立完成了接收值的动作，而左侧的 goroutine 正在发送一个新值到通道里。</li>
<li>在第 3 步，左侧的 goroutine 还在向通道发送新值，而右侧的 goroutine 正在从通道接收另外一个值。这个步骤里的两个操作既不是同步的，也不会互相阻塞。</li>
<li>最后，在第 4 步，所有的发送和接收都完成，而通道里还有几个值，也有一些空间可以存更多的值。</li>
</ul>
<p>有缓冲的 channel 创建格式：</p>
<p><code>make(**chan** Type, capacity)</code></p>
<p>​		如果给定了一个缓冲区容量，通道就是异步的。只要缓冲区有未使用空间用于发送数据，或还包含可以接收的数据，那么其通信就会无阻塞地进行。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>) <span class="comment">//有缓冲的通道</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//内置函数len返回未被读取的缓冲元素数量，cap返回缓冲区大小</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(c)=%d,cap(c)=%d\n&quot;</span>, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c))</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;子协程结束&quot;</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Printf(<span class="string">&quot;子协程正在运行[%d]:len(c)=%d,cap(c)=%d\n&quot;</span>, i, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">2</span> * time.Second) <span class="comment">//延时2s</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">		num := &lt;-c <span class="comment">//从从中接收数据,并赋值给num</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;num=&quot;</span>, num)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;main协程结束&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="range和close"><a href="#range和close" class="headerlink" title="range和close"></a>range和close</h4><p>​		如果发送者知道，没有更多的值需要发送到 channel 的话，那么让接收者也能及时知道没有多余的值可接收将是有用的，因为接收者可以停止不必要的接收等待。这可以通过内置的close 函数来关闭 channel 实现。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 把close(c)注释掉,程序会一直阻塞在if data, ok := &lt;-c; ok 那一行</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//ok为true说明channel没有关闭，为false说明管道已经关闭</span></span><br><span class="line">		<span class="keyword">if</span> data, ok := &lt;-c; ok &#123;</span><br><span class="line">			fmt.Println(data)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Finished&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>channel 不像文件一样需要经常去关闭，只有当你确实没有任何发送数据了，或者你想显式的结束 range 循环之类的，才去关闭 channel；</li>
<li>关闭 channel 后，无法向 channel 再发送数据(引发 panic 错误后导致接收立即返回零值)；</li>
<li>关闭 channel 后，可以继续向 channel 接收数据；</li>
<li>对于 nil channel，无论收发都会被阻塞。</li>
</ul>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 把close(c)注释掉,程序会一直阻塞在if data, ok := &lt;-c; ok 那一行</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> data := <span class="keyword">range</span> c &#123;</span><br><span class="line">		fmt.Println(data)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Finished&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="单向的channel"><a href="#单向的channel" class="headerlink" title="单向的channel"></a>单向的channel</h4><p>​		默认情况下，通道是双向的，也就是，既可以往里面发送数据也可以同里面接收数据。</p>
<p>​		但是，我们经常见一个通道作为参数进行传递而值希望对方是单向使用的，要么只让它发送数据，要么只让它接收数据，这时候我们可以指定通道的方向。</p>
<p>​		单向 channel 变量的声明非常简单，如下：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ch1 <span class="keyword">chan</span> <span class="type">int</span> <span class="comment">// ch1 是一个正常的 channel，不是单向的 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ch2 <span class="keyword">chan</span>&lt;- <span class="type">float64</span> <span class="comment">// ch2 是单向 channel，只用于写 float64 数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ch3 &lt;-<span class="keyword">chan</span> <span class="type">int</span> <span class="comment">// ch3 是单向 channel，只用于读取 int 数据</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>chan&lt;- 表示数据进入管道，要把数据写进管道，对于调用者就是输出。</li>
<li>&lt;-chan 表示数据从管道出来，对于调用者就是得到管道的数据，当然就是输入。</li>
</ul>
<p>可以将 channel 隐式转换为单向队列，只收或只发，不能将单向 channel 转换为普通channel：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223154404073.png"
                      alt="image-20221223154404073"
                ></p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">counter</span><span class="params">(out <span class="keyword">chan</span>&lt;- <span class="type">int</span>)</span></span> &#123; <span class="comment">// chan&lt;-只写</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="built_in">close</span>(out)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		out &lt;- i <span class="comment">//如果对方不读，会阻塞</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printer</span><span class="params">(in &lt;-<span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123; <span class="comment">// &lt;-chan只读</span></span><br><span class="line">	<span class="keyword">for</span> num := <span class="keyword">range</span> in &#123;</span><br><span class="line">		fmt.Println(num)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>) <span class="comment">//chan 读写</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//生产者，消费者</span></span><br><span class="line">	<span class="keyword">go</span> counter(c)</span><br><span class="line">	printer(c)</span><br><span class="line">	fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><h4 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h4><p>Timer 是一个定时器，代表未来的一个单一事件，你可以告诉 timer 你要等待多长时间，它提供一个 channel，在将来的那个时间那个 channel 提供了一个时间值。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建定时器，2秒后，定时器就会向自己的c字节发送一个time.Time类型的元素值</span></span><br><span class="line">	timer := time.NewTimer(time.Second * <span class="number">2</span>)</span><br><span class="line">	t1 := time.Now() <span class="comment">//当前时间</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;t1:%v\n&quot;</span>, t1)</span><br><span class="line"></span><br><span class="line">	t2 := &lt;-timer.C</span><br><span class="line">	fmt.Printf(<span class="string">&quot;t2:%v\n&quot;</span>, t2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果只是单纯的等待的话，可以使用time.sleep来实现</span></span><br><span class="line">	timer2 := time.NewTimer(time.Second * <span class="number">2</span>)</span><br><span class="line">	&lt;-timer2.C</span><br><span class="line">	fmt.Println(<span class="string">&quot;2s后&quot;</span>)</span><br><span class="line"></span><br><span class="line">	time.Sleep(time.Second * <span class="number">2</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;再一次2s后&quot;</span>)</span><br><span class="line"></span><br><span class="line">	&lt;-time.After(time.Second * <span class="number">2</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;再一次2s后&quot;</span>)</span><br><span class="line"></span><br><span class="line">	timer3 := time.NewTimer(time.Second)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		&lt;-timer3.C</span><br><span class="line">		fmt.Println(<span class="string">&quot;Timer 3 expired&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	stop := timer3.Stop() <span class="comment">//停止定时器</span></span><br><span class="line">	<span class="keyword">if</span> stop &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Timer 3 stopped&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;before&quot;</span>)</span><br><span class="line">	timer4 := time.NewTimer(time.Second * <span class="number">5</span>) <span class="comment">//原来设置3s</span></span><br><span class="line">	timer4.Reset(time.Second * <span class="number">1</span>)            <span class="comment">//重新设置时间</span></span><br><span class="line">	&lt;-timer4.C</span><br><span class="line">	fmt.Println(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="Ticker"><a href="#Ticker" class="headerlink" title="Ticker"></a>Ticker</h4><p>​		Ticker 是一个定时触发的计时器，它会以一个间隔(interval)往 channel 发送一个事件(当前时间)，而 channel 的接收者可以以固定的时间间隔从 channel 中读取事件。</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建定时器，每隔 1 秒后，定时器就会给 channel 发送一个事件(当前时间)</span></span><br><span class="line">	ticker := time.NewTicker(time.Second * <span class="number">1</span>)</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> &#123; <span class="comment">//循环</span></span><br><span class="line">			&lt;-ticker.C</span><br><span class="line">			i++</span><br><span class="line">			fmt.Println(<span class="string">&quot;i = &quot;</span>, i)</span><br><span class="line">			<span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">				ticker.Stop() <span class="comment">//停止定时器</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;() <span class="comment">//别忘了()</span></span><br><span class="line">	<span class="comment">//死循环，特地不让 main goroutine 结束</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><p>​		Go 里面提供了一个关键字 select，通过 select 可以监听 channel 上的数据流动。select 的用法与 switch 语言非常类似，由 select 开始一个新的选择块，每个选择条件由 case语句来描述。</p>
<p>​		与 switch 语句可以选择任何可使用相等比较的条件相比， select 有比较多的限制，其中最大的一条限制就是每个 case 语句里必须是一个 IO 操作，大致的结构如下：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> &lt;-chan1:</span><br><span class="line"><span class="comment">// 如果 chan1 成功读到数据，则进行该 case 处理语句</span></span><br><span class="line"><span class="keyword">case</span> chan2 &lt;- <span class="number">1</span>:</span><br><span class="line"><span class="comment">// 如果成功向 chan2 写入数据，则进行该 case 处理语句</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="comment">// 如果上面都没有成功，则进入 default 处理流程</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>​		在一个 select 语句中，Go 语言会按顺序从头至尾评估每一个发送和接收的语句。</p>
<p>​		如果其中的任意一语句可以继续执行(即没有被阻塞)，那么就从那些可以执行的语句中任意选择一条来使用。</p>
<p>如果没有任意一条语句可以执行(即所有的通道都被阻塞)，那么有两种可能的情况：</p>
<ul>
<li>如果给出了 default 语句，那么就会执行 default 语句，同时程序的执行会从 select 语句后的语句中恢复。</li>
<li>如果没有 default 语句，那么 select 语句将被阻塞，直到至少有一个通信可以进行下去。</li>
</ul>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(c, quit <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> c &lt;- x:</span><br><span class="line">			x, y = y, x+y</span><br><span class="line">		<span class="keyword">case</span> &lt;-quit:</span><br><span class="line">			fmt.Println(<span class="string">&quot;quit&quot;</span>)</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	quit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">6</span>; i++ &#123;</span><br><span class="line">			fmt.Println(&lt;-c)</span><br><span class="line">		&#125;</span><br><span class="line">		quit &lt;- <span class="number">0</span></span><br><span class="line">	&#125;()</span><br><span class="line">	fibonacci(c, quit)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>​		有时候会出现 goroutine 阻塞的情况，那么我们如何避免整个程序进入阻塞的情况呢？我们可以利用 select 来设置超时，通过如下的方式实现：</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	o := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">bool</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> v := &lt;-c:</span><br><span class="line">				fmt.Println(v)</span><br><span class="line">			<span class="keyword">case</span> &lt;-time.After(<span class="number">5</span> * time.Second):</span><br><span class="line">				fmt.Println(<span class="string">&quot;timeout&quot;</span>)</span><br><span class="line">				o &lt;- <span class="literal">true</span></span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">//c &lt;- 666 // 注释掉，引发 timeout</span></span><br><span class="line">	&lt;-o</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>







<h1 id="12-网络编程"><a href="#12-网络编程" class="headerlink" title="12.网络编程"></a>12.网络编程</h1><h3 id="网络概述"><a href="#网络概述" class="headerlink" title="网络概述"></a>网络概述</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223184924373.png"
                      alt="image-20221223184924373"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223184938057.png"
                      alt="image-20221223184938057"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223185153395.png"
                      alt="image-20221223185153395"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223185217341.png"
                      alt="image-20221223185217341"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223185227028.png"
                      alt="image-20221223185227028"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223185234563.png"
                      alt="image-20221223185234563"
                ></p>
<h3 id="socket编程"><a href="#socket编程" class="headerlink" title="socket编程"></a>socket编程</h3><h4 id="什么是socket"><a href="#什么是socket" class="headerlink" title="什么是socket"></a>什么是socket</h4><p>​		Socket 起源于 Unix，而 Unix 基本哲学之一就是“一切皆文件”，都可以用“打开 open –&gt; 读写 write&#x2F;read –&gt; 关闭 close”模式来操作。Socket 就是该模式的一个实现，网络的 Socket数据传输是一种特殊的 I&#x2F;O，Socket 也是一种文件描述符。Socket 也具有一个类似于打开文件的函数调用：Socket()，该函数返回一个整型的 Socket 描述符，随后的连接建立、数据传输等操作都是通过该 Socket 实现的。常 用 的 Socket 类型有两 种 ： 流 式 Socket （ SOCK_STREAM ）和数据报式 Socket（SOCK_DGRAM）。流式是一种面向连接的 Socket，针对于面向连接的 TCP 服务应用；数据报式 Socket 是一种无连接的 Socket，对应于无连接的 UDP 服务应用。</p>
<h4 id="TCP的C-S架构"><a href="#TCP的C-S架构" class="headerlink" title="TCP的C&#x2F;S架构"></a>TCP的C&#x2F;S架构</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223190503395.png"
                      alt="image-20221223190503395"
                ></p>
<h4 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h4><p>服务端</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dealConn</span><span class="params">(coon net.Conn)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> coon.Close() <span class="comment">//此函数结束时，关闭连接套接字</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//conn.RemoteAddr().String() 连接客户端的网络地址</span></span><br><span class="line">	ipAdd := coon.RemoteAddr().String()</span><br><span class="line">	fmt.Println(ipAdd, <span class="string">&quot;连接成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">1024</span>) <span class="comment">//缓冲区，用于接收客户端发送的数据</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//阻塞等待用户发送的数据</span></span><br><span class="line">		n, err := coon.Read(buf) <span class="comment">//n代码接受数据</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//切片截取，只截取有效数据</span></span><br><span class="line">		result := buf[:n]</span><br><span class="line">		fmt.Printf(<span class="string">&quot;接收到数据来自[%s]==&gt;[%d]:%s\n&quot;</span>, ipAdd, n, <span class="type">string</span>(result))</span><br><span class="line">		<span class="keyword">if</span> <span class="string">&quot;exit&quot;</span> == <span class="type">string</span>(result) &#123; <span class="comment">//如果对方发送”exit&quot;,退出此链接</span></span><br><span class="line">			fmt.Println(ipAdd, <span class="string">&quot;退出连接&quot;</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//把接收到的数据转换为大写，再给客户端发送</span></span><br><span class="line">		coon.Write([]<span class="type">byte</span>(strings.ToUpper(<span class="type">string</span>(result))))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创捷，监听socket</span></span><br><span class="line">	listenner, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:8000&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err) <span class="comment">//log.Fatal()会产生panic</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> listenner.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		coon, err := listenner.Accept() <span class="comment">//阻塞等待客户端连接</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Fatal(err)</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">go</span> dealConn(coon)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>客户端</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	coon, err := net.Dial(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:8000&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err) <span class="comment">//log.Fatal()会产生panic</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> coon.Close() <span class="comment">//关闭</span></span><br><span class="line"></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">1024</span>) <span class="comment">//缓冲区</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;请输入发送的内容：&quot;</span>)</span><br><span class="line">		fmt.Scan(&amp;buf)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;发送的内容：%s\n&quot;</span>, <span class="type">string</span>(buf))</span><br><span class="line"></span><br><span class="line">		<span class="comment">//发送数据</span></span><br><span class="line">		coon.Write(buf)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//阻塞等待服务器回复的数据</span></span><br><span class="line">		n, err := coon.Read(buf) <span class="comment">//n代码接收的数据长度</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//切片截取，只截取有效数据</span></span><br><span class="line">		result := buf[:n]</span><br><span class="line">		fmt.Printf(<span class="string">&quot;接收到数据[%d]:%s\n&quot;</span>, n, <span class="type">string</span>(result))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="HTTP编程"><a href="#HTTP编程" class="headerlink" title="HTTP编程"></a>HTTP编程</h3><h4 id="概述-7"><a href="#概述-7" class="headerlink" title="概述"></a>概述</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223193229850.png"
                      alt="image-20221223193229850"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223193233667.png"
                      alt="image-20221223193233667"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223193238373.png"
                      alt="image-20221223193238373"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223193241544.png"
                      alt="image-20221223193241544"
                ></p>
<h4 id="HTTP报文浅析"><a href="#HTTP报文浅析" class="headerlink" title="HTTP报文浅析"></a>HTTP报文浅析</h4><div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//创建、监听 socket</span></span><br><span class="line">	listenner, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:8000&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err) <span class="comment">//log.Fatal()会产生 panic</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> listenner.Close()</span><br><span class="line">	conn, err := listenner.Accept() <span class="comment">//阻塞等待客户端连接</span></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> conn.Close() <span class="comment">//此函数结束时，关闭连接套接字</span></span><br><span class="line">	<span class="comment">//conn.RemoteAddr().String()：连接客服端的网络地址</span></span><br><span class="line">	ipAddr := conn.RemoteAddr().String()</span><br><span class="line"></span><br><span class="line">	fmt.Println(ipAddr, <span class="string">&quot;连接成功&quot;</span>)</span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">4096</span>) <span class="comment">//缓冲区，用于接收客户端发送的数据</span></span><br><span class="line">	<span class="comment">//阻塞等待用户发送的数据</span></span><br><span class="line">	n, err := conn.Read(buf) <span class="comment">//n 代码接收数据的长度</span></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//切片截取，只截取有效数据</span></span><br><span class="line">	result := buf[:n]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;接收到数据来自[%s]==&gt;:\n%s\n&quot;</span>, ipAddr, <span class="type">string</span>(result))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223202444708.png"
                      alt="image-20221223202444708"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223202527615.png"
                      alt="image-20221223202527615"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223202542159.png"
                      alt="image-20221223202542159"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223202552577.png"
                      alt="image-20221223202552577"
                ></p>
<p>响应报文格式</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223203600281.png"
                      alt="image-20221223203600281"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223203609887.png"
                      alt="image-20221223203609887"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223203644944.png"
                      alt="image-20221223203644944"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223203109905.png"
                      alt="image-20221223203109905"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/images/image-20221223203120736.png"
                      alt="image-20221223203120736"
                ></p>
<h4 id="http编程"><a href="#http编程" class="headerlink" title="http编程"></a>http编程</h4><p>客户端</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//get方式请求一个资源</span></span><br><span class="line">	resp, err := http.Get(<span class="string">&quot;http://127.0.0.1:8000/&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close() <span class="comment">//关闭</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;header=&quot;</span>, resp.Header)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;resp status %s\n statuscode %d\n&quot;</span>, resp.Status, resp.StatusCode)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;body type=%T\n&quot;</span>, resp.Body)</span><br><span class="line"></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">2048</span>) <span class="comment">//切片缓冲区</span></span><br><span class="line">	<span class="keyword">var</span> temp <span class="type">string</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err := resp.Body.Read(buf) <span class="comment">//读取body内容</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;读取内容结束&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		temp += <span class="type">string</span>(buf[:n]) <span class="comment">//累加读取的内容</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;buf=&quot;</span>, <span class="type">string</span>(temp))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>服务端</p>
<div class="code-container" data-rel="Go"><figure class="iseeu highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端编写的业务逻辑处理程序</span></span><br><span class="line"><span class="comment">//header函数：myHandler(w http.ResponseWriter, r *http.Request)具有 签名的函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myHandler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	fmt.Println(r.RemoteAddr, <span class="string">&quot;连接成功&quot;</span>) <span class="comment">//r.RemoteAddr远程网络地址</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;method=&quot;</span>, r.Method)      <span class="comment">//请求方法</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;url=&quot;</span>, r.URL)</span><br><span class="line">	fmt.Println(<span class="string">&quot;header=&quot;</span>, r.Header)</span><br><span class="line">	fmt.Println(<span class="string">&quot;body=&quot;</span>, r.Body)</span><br><span class="line">	w.Write([]<span class="type">byte</span>(<span class="string">&quot;hello go&quot;</span>)) <span class="comment">//给客户端回复数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/go&quot;</span>, myHandler)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//该方法用于在指定的 TCP 网络地址 addr 进行监听，然后调用服务端处理程序来处理 传入的连接请求。</span></span><br><span class="line">	<span class="comment">//该方法有两个参数：第一个参数 addr 即监听地址；第二个参数表示服务端处理程序，通常为空</span></span><br><span class="line">	<span class="comment">//第二个参数为空意味着服务端调用 http.DefaultServeMux 进行处理</span></span><br><span class="line"></span><br><span class="line">	http.ListenAndServe(<span class="string">&quot;127.0.0.1:8000&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> Go黑马程序员</li>
        <li><strong>作者:</strong> 纸鸢</li>
        <li><strong>创建于
                :</strong> 2022-12-11 14:50:19</li>
        
            <li>
                <strong>更新于
                    :</strong> 2025-03-29 20:00:42
            </li>
        
        <li>
            <strong>链接:</strong> https://www.youandgentleness.cn/2022/12/11/Go黑马程序员/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Golang/">#Golang</a>&nbsp;
			</li>
			
		</ul>
		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/2023/01/02/Go%E5%AE%9E%E7%8E%B0%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">Go实现十大排序算法</span>
						<span class="post-nav-item">上一篇</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2022/08/05/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">c++核心编程</span>
						<span class="post-nav-item">下一篇</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div id="gitalk-container"></div>
    <script data-swup-reload-script
            src="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js"></script>
    <script data-swup-reload-script>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: 'Ov23liq2s2cr3kgdwlfS',
                    clientSecret: '4b5fc10f347765c682cfbbe04d901abfb4c750dc',
                    repo: 'gitalk',
                    owner: 'zhouxing9454',
                    admin: ['zhouxing9454'],
                    id: __gitalk__pathname,
                    language: 'zh-CN',
                    proxy: 'https://hidden-silence-cde4.zhouxing9454.workers.dev/?https://github.com/login/oauth/access_token'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">目录</div>
		<div class="page-title">Go黑马程序员</div>
		<ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E5%88%9D%E8%AF%86go%E8%AF%AD%E8%A8%80"><span class="nav-text">1.初识go语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AAGo%E7%A8%8B%E5%BA%8F"><span class="nav-text">第一个Go程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-text">命令行运行程序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-text">2.数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D"><span class="nav-text">命名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="nav-text">变量的声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">常量的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E5%8F%98%E9%87%8F%E6%88%96%E5%B8%B8%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-text">多个变量或常量的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iota%E6%9E%9A%E4%B8%BE"><span class="nav-text">iota枚举</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bool%E7%B1%BB%E5%9E%8B"><span class="nav-text">bool类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="nav-text">浮点数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="nav-text">字符类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">字符和字符串的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-text">复数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="nav-text">格式化输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E8%BE%93%E5%85%A5"><span class="nav-text">变量的输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E5%8C%96"><span class="nav-text">类型转化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="nav-text">类型别名</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">3运算符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-text">4.流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%8Cif%E6%94%AF%E6%8C%81%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AF%AD%E5%8F%A5"><span class="nav-text">if的使用，if支持初始化语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if-else-if-else%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-text">if else_if else的用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch"><span class="nav-text">switch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for"><span class="nav-text">for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#range"><span class="nav-text">range</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#break-continue"><span class="nav-text">break,continue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#goto"><span class="nav-text">goto</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E5%87%BD%E6%95%B0"><span class="nav-text">5.函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E6%A0%BC%E5%BC%8F"><span class="nav-text">定义格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E5%8F%82%E6%97%A0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">无参无返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E5%8F%82%E6%97%A0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">有参无返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-text">不定参数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0%E7%9A%84%E4%BC%A0%E9%80%92"><span class="nav-text">不定参数的传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%80%BC"><span class="nav-text">返回一个值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">多个返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">有参有返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="nav-text">递归函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-text">函数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AD%E5%8C%85"><span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defer%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-text">defer的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AAdefer%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-text">多个defer执行顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defer%E5%92%8C%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-text">defer和匿名函数结合使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="nav-text">获取命令行参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="nav-text">局部变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="nav-text">全局变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%90%8C%E5%90%8D%E5%8F%98%E9%87%8F"><span class="nav-text">不同作用域同名变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="nav-text">6.工程管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA"><span class="nav-text">工作区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA%E4%BB%8B%E7%BB%8D"><span class="nav-text">工作区介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GOPATH"><span class="nav-text">GOPATH</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85"><span class="nav-text">包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85"><span class="nav-text">自定义包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#main%E5%8C%85"><span class="nav-text">main包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#main%E5%87%BD%E6%95%B0%E5%92%8Cinit%E5%87%BD%E6%95%B0"><span class="nav-text">main函数和init函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%8C%85"><span class="nav-text">导入包</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="nav-text">测试案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-text">7.复合类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB"><span class="nav-text">分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E9%92%88"><span class="nav-text">指针</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#new%E5%87%BD%E6%95%B0"><span class="nav-text">new函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E9%92%88%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-text">指针做函数参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84"><span class="nav-text">操作数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E6%95%B0%E7%BB%84"><span class="nav-text">在函数传递数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-text">数组指针做函数参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="nav-text">冒泡排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="nav-text">随机数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E7%89%87"><span class="nav-text">切片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E7%89%87%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">切片的创建和初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E7%89%87%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">切片的操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E7%89%87%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-text">切片做函数参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map"><span class="nav-text">map</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="nav-text">map的创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC"><span class="nav-text">赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%8D%E5%8E%86"><span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-text">删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-text">map做函数参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-text">结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B"><span class="nav-text">结构体类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">结构体初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%88%90%E5%91%98%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">结构体成员的使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%AF%94%E8%BE%83"><span class="nav-text">结构体比较</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-text">结构体作为函数参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="nav-text">可见性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"><span class="nav-text">8.面向对象编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E7%BB%84%E5%90%88"><span class="nav-text">匿名组合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">匿名字段，初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%88%90%E5%91%98%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">成员的操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5"><span class="nav-text">同名字段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5"><span class="nav-text">其他匿名字段</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95"><span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E7%B1%BB%E5%9E%8B%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="nav-text">为类型添加方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E6%8E%A5%E6%94%B6%E8%80%85"><span class="nav-text">基础类型作为接收者</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E4%BD%9C%E4%B8%BA%E6%8E%A5%E6%94%B6%E8%80%85"><span class="nav-text">结构体作为接收者</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%80%BC%E8%AF%AD%E4%B9%89%E5%92%8C%E5%BC%95%E7%94%A8%E8%AF%AD%E4%B9%89"><span class="nav-text">值语义和引用语义</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E9%9B%86"><span class="nav-text">方法集</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B-T-%E6%96%B9%E6%B3%95%E9%9B%86"><span class="nav-text">类型*T 方法集</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8BT-%E6%96%B9%E6%B3%95%E9%9B%86"><span class="nav-text">类型T 方法集</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5"><span class="nav-text">匿名字段</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-text">方法的继承</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E5%86%99"><span class="nav-text">方法的重写</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E5%80%BC"><span class="nav-text">方法值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">方法表达式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3"><span class="nav-text">接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">接口的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="nav-text">接口定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="nav-text">接口实现</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E7%BB%84%E5%90%88"><span class="nav-text">接口组合</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%9F%A5%E8%AF%A2"><span class="nav-text">类型查询</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-text">9.异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#error%E6%8E%A5%E5%8F%A3"><span class="nav-text">error接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#panic"><span class="nav-text">panic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#recover"><span class="nav-text">recover</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="nav-text">10.文本文件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-text">字符串处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-text">字符串操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Contains"><span class="nav-text">Contains</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Join"><span class="nav-text">Join</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Index"><span class="nav-text">Index</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Repeat"><span class="nav-text">Repeat</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Replace"><span class="nav-text">Replace</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#splict"><span class="nav-text">splict</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Trim"><span class="nav-text">Trim</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Fields"><span class="nav-text">Fields</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96"><span class="nav-text">字符串转化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#append"><span class="nav-text">append</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#format"><span class="nav-text">format</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#parse"><span class="nav-text">parse</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSON%E5%A4%84%E7%90%86"><span class="nav-text">JSON处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E7%A0%81json"><span class="nav-text">编码json</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E7%BB%93%E6%9E%84%E4%BD%93%E7%94%9F%E6%88%90json"><span class="nav-text">通过结构体生成json</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87map%E7%94%9F%E6%88%90JSON"><span class="nav-text">通过map生成JSON</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E7%A0%81Json"><span class="nav-text">解码Json</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E5%88%B0%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-text">解析到结构体</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E5%88%B0interface"><span class="nav-text">解析到interface</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%99%E6%96%87%E4%BB%B6"><span class="nav-text">写文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="nav-text">读文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6"><span class="nav-text">拷贝文件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="nav-text">11.并发编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-6"><span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E8%A1%8C%E5%92%8C%E5%B9%B6%E5%8F%91"><span class="nav-text">并行和并发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#go%E8%AF%AD%E8%A8%80%E5%B9%B6%E5%8F%91%E4%BC%98%E5%8A%BF"><span class="nav-text">go语言并发优势</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#goroutine"><span class="nav-text">goroutine</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#goroutine%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-text">goroutine是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAgoroutine"><span class="nav-text">创建goroutine</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BBgoroutine%E5%85%88%E9%80%80%E5%87%BA"><span class="nav-text">主goroutine先退出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#runtime%E5%8C%85"><span class="nav-text">runtime包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Gosched"><span class="nav-text">Gosched</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Goexit"><span class="nav-text">Goexit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GOMAXPROCS"><span class="nav-text">GOMAXPROCS</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#channel"><span class="nav-text">channel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#channel%E7%B1%BB%E5%9E%8B"><span class="nav-text">channel类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E7%BC%93%E5%86%B2%E7%9A%84channel"><span class="nav-text">无缓冲的channel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E7%BC%93%E5%86%B2%E7%9A%84channel"><span class="nav-text">有缓冲的channel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#range%E5%92%8Cclose"><span class="nav-text">range和close</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%90%91%E7%9A%84channel"><span class="nav-text">单向的channel</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="nav-text">定时器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Timer"><span class="nav-text">Timer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ticker"><span class="nav-text">Ticker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#select"><span class="nav-text">select</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="nav-text">12.网络编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="nav-text">网络概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#socket%E7%BC%96%E7%A8%8B"><span class="nav-text">socket编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFsocket"><span class="nav-text">什么是socket</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E7%9A%84C-S%E6%9E%B6%E6%9E%84"><span class="nav-text">TCP的C&#x2F;S架构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F"><span class="nav-text">示例程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E7%BC%96%E7%A8%8B"><span class="nav-text">HTTP编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-7"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP%E6%8A%A5%E6%96%87%E6%B5%85%E6%9E%90"><span class="nav-text">HTTP报文浅析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#http%E7%BC%96%E7%A8%8B"><span class="nav-text">http编程</span></a></li></ol></li></ol></li></ol></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-cog fa-spin"></i>&nbsp;&nbsp;<a href="/">纸鸢</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 39 篇文章
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span>
        </div>
        
            <div class="icp-info my-1"><a target="_blank" rel="nofollow" href="
                
                    https://beian.miit.gov.cn/
                
                ">浙ICP备2022034029号</a></div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
            
                
        
                
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="站内搜索您需要的内容..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>


<script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/Swup.min.js" ></script><script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupSlideTheme.min.js" ></script><script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupScriptsPlugin.min.js" ></script><script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupProgressPlugin.min.js" ></script><script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupScrollPlugin.min.js" ></script><script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupPreloadPlugin.min.js" ></script>
<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	<script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/imageViewer.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/utils.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/main.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/navbarShrink.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/scrollTopBottom.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/lightDarkSwitch.js" ></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/categoryList.js" ></script>


    <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/localSearch.js" ></script>



    <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/codeBlock.js" ></script>



    <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/lazyload.js" ></script>



    <script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/runtime.js" ></script>
    <script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/odometer.min.js" ></script>
    <link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/assets/odometer-theme-minimal.css">



  <script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/Typed.min.js" ></script>
  <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/typed.js" ></script>










    <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/tocToggle.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/toc.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/tabs.js" data-swup-reload-script></script>


<script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/moment-with-locales.min.js" data-swup-reload-script></script>
<script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/essays.js" data-swup-reload-script></script>




    <script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/bookmarkNav.js" ></script>

	
	<div id="aplayer"></div>
<script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/APlayer.min.js" ></script>
<script  src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/aplayer.js" ></script>

	
</body>

</html>


<script type="text/javascript" src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/love.js"></script>
<script type="text/javascript" src="https://blog-1314857283.cos.ap-shanghai.myqcloud.com/FunnyTitle.js"></script>